<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[虎克的博客]]></title>
  <link href="http://apiaceae.github.io/atom.xml" rel="self"/>
  <link href="http://apiaceae.github.io/"/>
  <updated>2013-09-25T00:15:10+08:00</updated>
  <id>http://apiaceae.github.io/</id>
  <author>
    <name><![CDATA[Hooker]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Move to Octopress]]></title>
    <link href="http://apiaceae.github.io/blog/2013/09/24/move-to-octopress/"/>
    <updated>2013-09-24T21:50:00+08:00</updated>
    <id>http://apiaceae.github.io/blog/2013/09/24/move-to-octopress</id>
    <content type="html"><![CDATA[<p>This is a test for octopuses blog template.</p>

<p><em>这里仅仅是一个测试页面！</em></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Nginx内核参数相关的优化设定说明]]></title>
    <link href="http://apiaceae.github.io/blog/2013/09/03/nginx/"/>
    <updated>2013-09-03T00:00:00+08:00</updated>
    <id>http://apiaceae.github.io/blog/2013/09/03/nginx</id>
    <content type="html"><![CDATA[<p>Nginx内核参数在使用的时候有不少问题需要我们解决，其中在优化方面就需要我们格外的注意。在下面就是对Nginx内核参数优化的详细介绍，希望大家有所收获。</p>

<p>关于Nginx内核参数的优化：</p>

<p><strong>net.ipv4.tcp_max_tw_buckets = 6000</strong>
<em>timewait的数量，默认是180000</em></p>

<p><strong>net.ipv4.ip_local_port_range = 1024 65000</strong>
<em>允许系统打开的端口范围。</em></p>

<p><strong>net.ipv4.tcp_tw_recycle = 1</strong>
<em>启用timewait快速回收。</em></p>

<p><strong>net.ipv4.tcp_tw_reuse = 1</strong>
<em>开启重用。允许将TIME-WAIT sockets重新用于新的TCP连接。</em></p>

<p><strong>net.ipv4.tcp_syncookies = 1</strong>
<em>开启SYN Cookies，当出现SYN等待队列溢出时，启用cookies来处理。</em></p>

<p><strong>net.core.somaxconn = 262144</strong>
<em>web应用中listen函数的backlog默认会给我们内核参数的net.core.somaxconn限制到128，而Nginx内核参数定义的NGX_LISTEN_BACKLOG默认为511，所以有必要调整这个值。</em></p>

<p><strong>net.core.netdev_max_backlog = 262144</strong>
<em>每个网络接口接收数据包的速率比内核处理这些包的速率快时，允许送到队列的数据包的最大数目。</em></p>

<p><strong>net.ipv4.tcp_max_orphans = 262144</strong>
<em>系统中最多有多少个TCP套接字不被关联到任何一个用户文件句柄上。如果超过这个数字，孤儿连接将即刻被复位并打印出警告信息。这个限制仅仅是为了防止简单的DoS攻击，不能过分依靠它或者人为地减小这个值，更应该增加这个值(如果增加了内存之后)。</em></p>

<p><strong>net.ipv4.tcp_max_syn_backlog = 262144</strong>
<em>记录的那些尚未收到客户端确认信息的连接请求的最大值。对于有128M内存的系统而言，缺省值是1024，小内存的系统则是128。</em></p>

<p><strong>net.ipv4.tcp_timestamps = 0</strong>
<em>时间戳可以避免序列号的卷绕。一个1Gbps的链路肯定会遇到以前用过的序列号。时间戳能够让内核接受这种“异常”的数据包。这里需要将其关掉。</em></p>

<p><strong>net.ipv4.tcp_synack_retries = 1</strong>
<em>为了打开对端的连接，内核需要发送一个SYN并附带一个回应前面一个SYN的ACK。也就是所谓三次握手中的第二次握手。这个设置决定了内核放弃连接之前发送SYN+ACK包的数量。</em></p>

<p><strong>net.ipv4.tcp_syn_retries = 1</strong>
<em>在内核放弃建立连接之前发送SYN包的数量。</em></p>

<p><strong>net.ipv4.tcp_fin_timeout = 1</strong>
<em>如果套接字由本端要求关闭，这个参数决定了它保持在FIN-WAIT-2状态的时间。对端可以出错并永远不关闭连接，甚至意外当机。缺省值是60秒。2.2 内核的通常值是180秒，你可以按这个设置，但要记住的是，即使你的机器是一个轻载的WEB服务器，也有因为大量的死套接字而内存溢出的风险，FIN- WAIT-2的危险性比FIN-WAIT-1要小，因为它最多只能吃掉1.5K内存，但是它们的生存期长些。</em></p>

<p><strong>net.ipv4.tcp_keepalive_time = 30</strong>
<em>当keepalive起用的时候，TCP发送keepalive消息的频度。缺省是2小时。以上就是对Nginx内核参数的详细介绍。</em></p>

<p><strong>转载自<a href="http://9ilinux.com/9ilinux/68.html">Linux系统运维</a></strong></p>

<p>Included file &lsquo;JB/setup&rsquo; not found in _includes directory</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[LAMP系统性能调优]]></title>
    <link href="http://apiaceae.github.io/blog/2013/09/03/lamp/"/>
    <updated>2013-09-03T00:00:00+08:00</updated>
    <id>http://apiaceae.github.io/blog/2013/09/03/lamp</id>
    <content type="html"><![CDATA[<p><strong>一、理解LAMP架构</strong></p>

<p>如今，使用 LAMP（Linux®、Apache、MySQL 和 PHP/Perl）架构的应用程序不断被开发和部署。但是，服务器管理员对应用程序本身几乎没有控制能力，因为应用程序是别人编写的。这份共三部分的系列文章将讨论许多服务器配置问题，这些配置会影响应用程序的性能。第一篇文章讨论 LAMP 架构、一些性能度量技术以及一些基本的 Linux 内核、硬盘和文件系统调节。后续的文章将研究 Apache、MySQL 和 PHP 组件的调优。</p>

<p>Linux、 Apache、MySQL 和 PHP（或 Perl）是许多 Web 应用程序的基础 —— 从 to-do 列表到 blog，再到电子商务站点。WordPress 和 Pligg 是两个支持大容量 Web 站点的常用软件包。这种架构简称为 LAMP。几乎每个 Linux 发布版都包含 Apache、MySQL、PHP 和 Perl，所以安装 LAMP 软件是非常容易的。</p>

<p>安装的简便性使人误以为这些软件会自行顺利地运行，但是实际情况并非如此。最终，应用程序的负载会超出后端服务器自带设置的处理能力，应用程序的性能会降低。LAMP 安装需要不断监控、调优和评估。</p>

<p>系统调优对于不同的人有不同的含义。本系列主要关注 LAMP 组件（Linux、Apache、MySQL 和 PHP）的调优。对应用程序本身进行调优是另一个复杂的问题。应用程序和后端服务器之间存在一种共生关系：未能适当调优的服务器甚至会使最好的应用程序在负载之下崩溃，而借助充分的调优，完全可以避免编写得很糟糕的应用程序使服务器缓慢如牛。幸运的是，正确的系统调优和监视可以指出应用程序中的问题。</p>

<p><em>LAMP架构</em></p>

<p>对任何系统进行调优的第一步都是了解它的工作原理。按照最简单的形式，基于 LAMP 的应用程序是用 PHP 这样的脚本语言编写的，它们作为 Linux 主机上运行的 Apache Web 服务器的一部分运行。</p>

<p>PHP 应用程序通过请求的 URL、所有表单数据和已捕获的任意会话信息从客户机获得信息，从而确定应该执行什么操作。如有必要，服务器会从 MySQL 数据库（也在 Linux 上运行）获得信息，将这些信息与一些 Hypertext Markup Language（HTML）模板组合在一起，并将结果返回给客户机。当用户在应用程序中导航时，这个过程重复进行；当多个用户访问系统时，这个过程会并发进行。但是，数据流不是单向的，因为可以用来自用户的信息更新数据库，包括会话数据、统计数据（包括投票）和用户提交的内容（比如评论或站点更新）。除了动态元素之外，还有静态元素，比如图像、JavaScript 代码和层叠样式表（CSS）。</p>

<p>在研究 LAMP 系统中的请求流之后，就来看看可能出现性能瓶颈的地方。数据库提供许多动态信息，所以数据库对查询的响应延迟都会反映在客户机中。Web 服务器必须能够快速地执行脚本，还要能够处理多个并发请求。最后，底层操作系统必须处于良好的状态才能支持应用程序。通过网络在不同服务器之间共享文件的其他设置也可能成为瓶颈。</p>

<p><em>LAMP的变体</em></p>

<p>LAMP 最初是指 Linux、Apache、MySQL 和 PHP（或 Perl）。但是，如果管理员不擅长 Linux，那么可以在 Microsoft® Windows® 上运行 Apache、MySQL 和 PHP，这并非一种少见的情况。同样，也可以将 Apache 换成别的系统，比如 lighttpd，产生的仍然是 LAMP 风格的系统，但是首字母缩写不再是 LAMP 了。也可以改用另一种开放源码数据库（比如 PostgreSQL 或 SQLite）、商业数据库（比如 IBM® DB2®）或者免费的商业引擎（比如 IBM DB2 Express-C）。</p>

<p>本文主要关注传统的 LAMP 架构，因为这种架构是最常见的，而且它的组件都是开放源码的。</p>

<p>度量性能</p>

<p>持续地对性能进行度量在两个方面有帮助。首先，度量可以帮助了解性能趋势，包括好坏两方面的趋势。作为一个简单的方法，查看一下 Web 服务器上的中央处理单元（CPU）使用率，就可以了解 CPU 是否负载过重。同样，查看过去使用的总带宽并推断未来的变化，可以帮助判断什么时候需要进行网络升级。这些度量最好与其他度量和观测结合考虑。例如，当用户抱怨应用程序太慢时，可以检查磁盘操作是否达到了最大容量。</p>

<p>性能度量的第二个用途是，判断调优是对系统性能有帮助，还是使它更糟糕了。方法是比较修改之前和之后的度量结果。但是，为了进行有效的比较，每次应该只修改一个设置，然后对适当的指标进行比较以判断修改的效果。每次只修改一个设置的原因应该是很明显的：同时做出的两个修改很可能会相互影响。选择用来进行比较的指标比较微妙。</p>

<p>选择的指标必须能够反映应用程序用户感觉到的响应。如果一项修改的目标是减少数据库的内存占用量，那么取消各种缓冲区肯定会有帮助，但是这会牺牲查询速度和应用程序性能。所以，应该选择应用程序响应时间这样的指标，这会使调优向着正确的方向发展，而不仅仅是针对数据库内存使用量。</p>

<p>可以以许多方式度量应用程序响应时间。最简单的方法可能是使用 curl 命令，见清单 1。</p>

<p>清单 1. 使用 cURL 度量 Web 站点的响应时间</p>

<blockquote><ul>
<li>$ curl -o /dev/null -s -w %{time_connect}:%{time_starttransfer}:{time_total\</li>
<li> <a href="http://www.canada.com">http://www.canada.com</a></li>
<li>0.081:0.272:0.779</li>
</ul>
</blockquote>

<p>清单 1 给出对一个流行的新闻站点执行 curl 命令的情况。输出通常是 HTML 代码，通过 -o 参数发送到 /dev/null。-s 参数去掉所有状态信息。-w 参数让 curl 写出表 1 列出的计时器的状态信息：</p>

<p>表 1. curl 使用的计时器
计时器              |    描述
time_connect       |    建立到服务器的 TCP 连接所用的时间
time_starttransfer |    在发出请求之后，Web 服务器返回数据的第一个字节所用的时间
time_total         |    完成请求所用的时间</p>

<p>这些计时器都相对于事务的起始时间，甚至要先于 Domain Name Service（DNS）查询。因此，在发出请求之后，Web服务器处理请求并开始发回数据所用的时间是 0.272 &ndash; 0.081 = 0.191 秒。客户机从服务器下载数据所用的时间是 0.779 -0.272 = 0.507 秒。</p>

<p>通过观察 curl 数据及其随时间变化的趋势，可以很好地了解站点对用户的响应性。</p>

<p>当然，Web 站点不仅仅由页面组成。它还有图像、JavaScript 代码、CSS 和 cookie 要处理。curl 很适合了解单一元素的响应时间，但是有时候需要了解整个页面的装载速度。</p>

<p>用于 Firefox 浏览器的 Tamper Data 扩展可以在日志中记录 Web 浏览器发出的每个请求，并显示每个请求所用的下载时间。使用这个扩展的方法是，选择 Tools > Tamper Data 来打开 Ongoing requests 窗口。装载要考察的页面，然后就会看到浏览器发出的每个请求的状态和装载每个元素所用的时间。图 1 给出装载 developerWorks 主页的结果。</p>

<p>图 1. 用于装载 developerWorks 主页的请求细目</p>

<p>每一行描述一个元素的装载情况。显示的数据包括发出请求的时间、装载所用的时间、大小和结果。Duration 栏列出装载元素本身所用的时间，Total Duration 栏列出所有子元素所用的时间。在图 1 中，装载主要页面所用的时间是 516 毫秒（ms），但是装载所有东西并显示整个页面所用的时间是 5101 ms。</p>

<p>Tamper Data 扩展有一种有用的模式，将页面装载数据的输出绘制成图形。右击 Ongoing requests 窗口上半部分的任何地方，并选择 Graph all。图 2 显示图 1 中数据的图形化视图。</p>

<p>图 2. 用于装载 developerWorks 主页的请求的图形化视图</p>

<p>在图 2 中，每个请求的持续时间显示为深蓝色，并相对于页面装载的启始时间显示。所以，可以看出哪些请求使整个页面的装载变慢了。</p>

<p>尽管关注的重点是页面装载时间和用户体验，但是也不要忽视核心系统指标，比如磁盘、内存和网络。有许多实用程序可以捕获这些信息；其中最有帮助的可能是 sar、vmstat 和 iostat。</p>

<p>基本系统调节</p>

<p>在对系统的 Apache、PHP 和 MySQL 组件进行调优之前，应该花一些时间确保底层 Linux 组件的运行正常。还应该对正在运行的服务进行缩减，只运行需要的那些服务。这不但是一种良好的安全实践，而且可以节省内存和 CPU 时间。</p>

<p>一些快速的内核调优措施</p>

<p>大多数 Linux 发布版都定义了适当的缓冲区和其他 Transmission Control Protocol（TCP）参数。可以修改这些参数来分配更多的内存，从而改进网络性能。设置内核参数的方法是通过 proc 接口，也就是通过读写 /proc 中的值。幸运的是，sysctl 可以读取 /etc/sysctl.conf 中的值并根据需要填充 /proc，这样就能够更轻松地管理这些参数。清单 2 展示在互联网服务器上应用于 Internet 服务器的一些比较激进的网络设置。</p>

<p>清单 2. 包含较为激进的网络设置的 /etc/sysctl.conf</p>

<h1>Use TCP syncookies when needed</h1>

<p>net.ipv4.tcp_syncookies = 1</p>

<h1>Enable TCP window scaling</h1>

<p>net.ipv4.tcp_window_scaling: = 1</p>

<h1>Increase TCP max buffer size</h1>

<p>net.core.rmem_max = 16777216
net.core.wmem_max = 16777216</p>

<h1>Increase Linux autotuning TCP buffer limits</h1>

<p>net.ipv4.tcp_rmem = 4096 87380 16777216
net.ipv4.tcp_wmem = 4096 65536 16777216</p>

<h1>Increase number of ports available</h1>

<p>net.ipv4.ip_local_port_range = 1024 65000
复制代码
将这些设置添加到 /etc/sysctl.conf 的现有内容中。第一个设置启用 TCP SYN cookie。当从客户机发来新的 TCP 连接时，数据包设置了 SYN 位，服务器就为这个半开的连接创建一个条目，并用一个 SYN-ACK 数据包进行响应。在正常操作中，远程客户机用一个 ACK 数据包进行响应，这会使半开的连接转换为全开的。有一种称为 SYN 泛滥（SYN flood） 的网络攻击，它使 ACK 数据包无法返回，导致服务器用光内存空间，无法处理到来的连接。SYN cookie 特性可以识别出这种情况，并使用一种优雅的方法保留队列中的空间（细节参见 参考资料 一节）。大多数系统都默认启用这个特性，但是确保配置这个特性更可靠。</p>

<p>启用 TCP 窗口伸缩使客户机能够以更高的速度下载数据。TCP 允许在未从远程端收到确认的情况下发送多个数据包，默认设置是最多 64 KB，在与延迟比较大的远程客户机进行通信时这个设置可能不够。窗口伸缩会在头中启用更多的位，从而增加窗口大小。</p>

<p>后面四个配置项增加 TCP 发送和接收缓冲区。这使应用程序可以更快地丢掉它的数据，从而为另一个请求服务。还可以强化远程客户机在服务器繁忙时发送数据的能力。</p>

<p>最后一个配置项增加可用的本地端口数量，这样就增加了可以同时服务的最大连接数量。</p>

<p>在下一次引导系统时，或者下一次运行 sysctl -p /etc/sysctl.conf 时，这些设置就会生效。</p>

<p>配置磁盘来提高性能</p>

<p>磁盘在 LAMP 架构中扮演着重要的角色。静态文件、模板和代码都来自磁盘，组成数据库的数据表和索引也来自磁盘。对磁盘的许多调优（尤其是对于数据库）集中于避免磁盘访问，因为磁盘访问的延迟相当高。因此，花一些时间对磁盘硬件进行优化是有意义的。</p>

<p>首先要做的是，确保在文件系统上禁用 atime 日志记录特性。atime 是最近访问文件的时间，每当访问文件时，底层文件系统必须记录这个时间戳。因为系统管理员很少使用 atime，禁用它可以减少磁盘访问时间。禁用这个特性的方法是，在 /etc/fstab 的第四列中添加 noatime 选项。清单 3 给出了一个配置示例。</p>

<p>清单 3. 演示如何启用 noatime 的 fstab 示例
/dev/VolGroup00/LogVol00 /                      ext3    defaults,noatime        1 1
LABEL=/boot             /boot                   ext3    defaults,noatime        1 2
devpts                  /dev/pts                devpts  gid=5,mode=620  0 0
tmpfs                   /dev/shm                tmpfs   defaults        0 0
proc                    /proc                   proc    defaults        0 0
sysfs                   /sys                    sysfs   defaults        0 0
LABEL=SWAP-hdb2         swap                    swap    defaults        0 0
LABEL=SWAP-hda3         swap                    swap    defaults        0 0
复制代码
在清单 3 中只修改了 ext3 文件系统，因为 noatime 只对驻留在磁盘上的文件系统有帮助。为让这一修改生效，不需要重新引导；只需重新挂装每个文件系统。例如，为了重新挂装根文件系统，运行 mount / -o remount。</p>

<p>有多种磁盘硬件组合，而且 Linux 不一定能够探测出访问磁盘的最佳方式。可以使用 hdparm 命令查明和设置用来访问 IDE 磁盘的方法。hdparm -t /path/to/device 执行速度测试，可以将这个测试结果作为性能基准。为了使结果尽可能准确，在运行这个命令时系统应该是空闲的。清单 4 给出在 hda 上执行速度测试的结果。</p>

<p>清单 4. 在 /dev/hd 上执行的速度测试</p>

<h1>hdparm -t /dev/hda</h1>

<p>/dev/hda:
Timing buffered disk reads:  182 MB in  3.02 seconds =  60.31 MB/sec
复制代码
这一测试说明，在这个磁盘上读取数据的速度是大约每秒 60 MB。</p>

<p>在尝试一些磁盘调优选项之前，必须注意一个问题。错误的设置可能损害文件系统。有时候会出现一个警告，指出这个选项与硬件不兼容；但是，有时候没有警告消息。因此，在将系统投入生产之前，必须对设置进行彻底的测试。在所有服务器上都采用标准的硬件也会有所帮助。</p>

<p>表 2 列出比较常用的一些选项。</p>

<p>表 2. hdparm 的常用选项
选项  描述
-vi 向磁盘查询它支持的设置以及它正在使用的设置。
-c  查询/启用 (E)IDE 32 位 I/O 支持。hdparm -c 1 /dev/hda 启用这个设置。
-m  查询/设置每中断多扇区模式。如果设置大于零，设置值就是每个中断可以传输的最大扇区数量。
-d 1 -X 启用直接内存访问（DMA）传输并设置 IDE 传输模式。hdparm 手册页详细说明了在 -X 后面可以设置的数字。只有在 -vi 说明目前并未使用最快速的模式的情况下，才需要进行这个设置。</p>

<p>不幸的是，对于 Fiber Channel and Small Computer Systems Interface（SCSI）系统，调优依赖于具体的驱动器。</p>

<p>必须将有帮助的设置添加到启动脚本中，比如 rc.local。</p>

<p>网络文件系统调优</p>

<p>网络文件系统（NFS）是一种通过网络共享磁盘的方法。NFS 可以帮助确保每个主机具有相同数据的拷贝，并确保修改反映在所有节点上。但是，在默认情况下，NFS 的配置不适合大容量磁盘。</p>

<p>每个客户机应该用 rsize=32768,wsize=32768,intr,noatime 挂装远程文件系统，从而确保：</p>

<pre><code>* 使用大的读/写块（数字指定最大块大小，在这个示例中是 32KB）。
* 在挂起时 NFS 操作可以被中断。
* 不持续更新 atime。
</code></pre>

<p>可以将这些设置放在 /etc/fstab 中，见 清单 3。如果使用自动挂装器，那么应该将这些设置放在适当的 /etc/auto.* 文件中。</p>

<p>在服务器端，一定要确保有足够的 NFS 内核线程来处理所有客户机。在默认情况下，只启动一个线程，但是 Red Hat 和 Fedora 系统会启动 8 个线程。对于繁忙的 NFS 服务器，应该提高这个数字，比如 32 或 64。可以用 nfsstat -rc 命令评估客户机，了解是否有阻塞的现象，这个命令显示客户机远程过程调用（RPC）统计数据。清单 5 显示一个 Web 服务器的客户机统计数据。</p>

<p>清单 5. 显示 NFS 客户机的 RPC 统计数据</p>

<h1>nfsstat -rc</h1>

<p>Client rpc stats:
calls      retrans    authrefrsh
1465903813   0          0
复制代码
第二列 retrans 是零，这表示从上一次重新引导以来没有出现需要重新传输的情况。如果这个数字比较大，就应该考虑增加 NFS 内核线程。设置方法是将所需的线程数量传递给 rpc.nfsd，比如 rpc.nfsd 128 会启动 128 个线程。任何时候都可以进行这种设置。线程会根据需要启动或销毁。同样，这个设置应该放在启动脚本中，尤其是在系统上启用 NFS 的脚本。</p>

<p>关于 NFS，最后要注意一点：如果可能的话，应该避免使用 NFSv2，因为 NFSv2 的性能比 v3 和 v4 差得多。在现代的 Linux 发行版中这应该不是问题，但是可以在服务器上检查 nfsstat 的输出，了解是否有任何 NFSv2 调用。</p>

<p><strong>二、优化Apache和PHP</strong></p>

<p> 上一篇文章 展示了调优 Linux 系统的方法，还介绍了 LAMP 和性能度量的基础知识。本文重点关注 Web 服务器组件：Apache 和 PHP。</p>

<p>调优 Apache</p>

<p>Apache 是一种高度可配置的软件。它具有大量特性，但每一种都代价高昂。从某种程度上来说，调优 Apache 来说就是以恰当的方式分配资源，还涉及到将配置简化为仅包含必要内容。</p>

<p>配置 MPM</p>

<p>Apache 是模块化的，因为可以轻松添加和移除特性。在 Apache 的核心，多处理模块（Multi-Processing Module，MPM）提供了这种模块化功能性 —— 管理网络连接、调度请求。MPM 使您能够使用线程，甚至能够将 Apache 迁移到另外一个操作系统。</p>

<p>每次只能有一个 MPM 是活动的，必须使用 &mdash;with-mpm=(worker|prefork|event) 静态编译。</p>

<p>每个请求使用一个进程的传统模型称为 prefork。较新的线程化模型称为 worker，它使用多个进程，每个进程又有多个线程，这样就能以较低的开销获得更好的性能。最新的 event MPM 是一种实验性的模型，为不同的任务使用单独的线程池。要确定当前使用的是哪种 MPM，可执行 httpd -l。</p>

<p>选择使用何种 MPM 取决于许多因素。在 event MPM 脱离实验状态之前，不应考虑这种模型，而是在使用线程和不使用线程之间作出选择。表面上看来，如果所有底层模块（包括 PHP 使用的所有库）都是线程安全的，线程要优于分叉（forking）。而 Prefork 是较为安全的选择；如果选择了 worker，则应该谨慎测试。性能收益还取决于您的发布版所附带的库及硬件。</p>

<p>无论选择了哪种 MPM，都必须恰当地配置它。一般而言，配置 MPM 包括告知 Apache 怎样去控制有多少 worker 正在运行，它们是线程还是进程。prefork MPM 的重要配置选项如清单 1 所示。</p>

<p>清单 1. prefork MPM 的配置
StartServers       50
MinSpareServers   15
MaxSpareServers   30
MaxClients       225
MaxRequestsPerChild  4000
复制代码
prefork 模型会为每个请求创建一个新进程。多余的进程保持空闲，以处理传入的请求，这缩短了启动延迟。只要 Web 服务器出现，预先完成的配置就会立即启动 50 个进程，并尽力保持 10 到 20 个空闲服务器运行。进程数的硬性限制由 MaxClients 指定。尽管一个进程能够处理许多相继的请求，Apache 还是会取消连接数超过 4,000 以后的进程，这降低了内存泄漏的风险。</p>

<p>配置线程化 MPM 与之类似，不同之处只是必须确定使用多少线程和进程。Apache 文档解释了所有必要的参数和计算。</p>

<p>要经过几次尝试和出错之后才能选好要使用的值。最重要的值是 MaxClients。目标在于允许足够多的 workder 进程或线程运行，同时又不会导致服务器进行过度的交换。如果传入的请求超出处理能力，那么至少满足此值的那些请求会得到服务，其他请求被阻塞。</p>

<p>如果 MaxClients 过高，那么所有客户机都将体验到糟糕的服务，因为 Web 服务器会试图换出一个进程，以使另一个进程能够运行。而设得过低意味着可能会不必要地拒绝服务。查看高负载下运行的进程数量和所有 Apache 进程所导致的内存占用情况对设置这个值很有帮助。如果 MaxClients 的值超过 256，必须将 ServerLimit 也设为同样的数值，请仔细阅读 MPM 的文档，了解相关信息。</p>

<p>根据服务器的角色调优要启动和保持空闲的服务器数量。如果服务器仅运行 Apache，那么可以使用适中的值，如 清单 1 所示，因为这样就能充分利用机器。如果系统中还有其他数据库或服务器，那么就应该限制运行中的空闲服务器的数量。</p>

<p>有效地使用选项和重写</p>

<p>Apache 处理的每个请求都要履行一套复杂的规则，这些规则指明了 Web 服务器必须遵循的约束或特殊指令。对文件夹的访问可能按 IP 地址约束为某个特定文件夹，也可配置用户名和密码。这些选项还包含处理特定文件，例如，如果提供了一个目录列表，该如何处理的文件，或输出结果是否应压缩。</p>

<p>这些配置以 httpd.conf 中容器的形式出现，例如 <Directory>，以便指定所用配置引用的是磁盘上的一个位置；再如 <Location>，表示引用是 URL 中的路径。清单 2 展示了一个实际的 Directory 容器。</p>

<p>清单 2. 为根目录应用的一个 Directory 容器
<Directory /></p>

<pre><code>AllowOverride None
Options FollowSymLinks
</code></pre>

<p></Directory>
复制代码
在清单 2 中，位于一对 Directory 和 /Directory 标记之间的配置应用于给定目录和该目录下的一切内容 —— 在本例中，这个给定目录是根目录。此处，AllowOverride 标记指出，用户不允许重写任何选项（稍后将进一步介绍）。FollowSymLinks 选项被启用，它允许 Apache 查看之前的符号连接来为请求提供服务，即便文件位于包含 Web 文件的目录之外。这就意味着，如果 Web 目录中的一个文件是 /etc/passwd 的符号连接，Web 服务器将在请求时顺利为该文件提供服务。如果使用了 -FollowSymLinks，该特性就会被禁用，同样的请求将致使为客户机返回错误。</p>

<p>最后这个场景正是导致两方面关注的原因所在。第一个方面与性能有关。如果禁用了 FollowSymLinks，Apache 就必须检查使用该文件名的所有组件（目录和文件本身），以确保它们不是符号连接。这会带来额外的开销（磁盘操作）。另外一个称为 FollowSymLinksIfOwnerMatch 的选项会在文件所有者与连接所有者相同时使用符号连接。为获得最佳性能，请使用 清单 2 中的选项。</p>

<p>至此，有安全意识的读者应该有了警惕的感觉。安全性永远是功能性与风险之间的权衡。在我们的例子中，功能性是速度，而风险是允许对系统上的文件进行未经授权的访问。缓解风险的措施之一是 LAMP 应用服务器通常专注于一种具体功能，用户无法创建危险的符号连接。如果有必要启用符号连接，那么可以将其约束在文件系统的特定区域，如清单 3 所示。</p>

<p>清单 3. 将 FollowSymLinks 约束为一个用户的目录
<Directory />
   Options FollowSymLinks
</Directory></p>

<p><Directory /home/*/public_html>
   Options -FollowSymLinks
</Directory>
复制代码
在清单 3 中，一个用户的主目录中的任何 public_html 目录及其所有子目录都移除了 FollowSymLinks 选项。</p>

<p>如您所见，通过主服务器配置，可为每个目录单独配置选项。用户可以自行重写这种服务器配置（如果管理员通过 AllowOverrides 语句允许了这种操作），只需将一个 .htaccess 文件放入目录即可。该文件包含额外的服务器指令，每次请求包含 .htaccess 文件的目录时将加载并应用这些指令。尽管之前探讨过系统没有用户的问题，但许多 LAMP 应用程序都利用这种功能性来控制访问、实现 URL 重写，因此有必要理解其工作原理。</p>

<p>即便 AllowOverrides 语句能阻止用户去做您不希望他们做的事，Apache 也必须检查 .htaccess 文件，看看是否有要完成的工作。父目录可以指定由来自子目录的请求处理的指令，这也就表示，Apache 必须搜索所请求文件的目录树的所有组件。可想而知，这会使每次请求都导致大量磁盘操作。</p>

<p>最简单的解决方案是不允许重写，这能消除 Apache 检查 .htaccess 的需求。之后的任何特殊配置都将直接放在 httpd.conf 中。清单 4 显示为对一个用户的项目目录进行密码检查向 httpd.conf 增加的代码，而不是将其放入一个 .htaccess 文件并依赖于 AllowOverrides。</p>

<p>清单 4. 将 .htaccess 配置移入 httpd.conf
<Directory /home/user/public_html/project/>
  AuthUserFile /home/user/.htpasswd
  AuthName &ldquo;uber secret project&rdquo;
  AuthType basic
  Require valid-user
</Directory>
复制代码
如果配置转移到 httpd.conf 中，且 AllowOverrides 被禁用，磁盘的使用就能减少。一个用户的项目可能不会吸引许多人来点击，但设想一下，将这项技术应用于一个忙碌的站点时会有多么强大。</p>

<p>有时不可能彻底消除 .htaccess 文件的使用。例如，在清单 5 中，一个选项被约束到文件系统的特定部分，重写也可以是有作用域的。</p>

<p>清单 5. 限定 .htaccess 检查的作用域
<Directory />
  AllowOverrides None
</Directory></p>

<p><Directory /home/*/public_html>
  AllowOverrides AuthConfig
</Directory>
复制代码
实现清单 5 之后，Apache 会在父目录中查找 .htaccess 文件，但会在 public_html 目录处停止，因为文件系统的其余部分禁用了此功能。例如，如果请求的是一个映射到 /home/user/public_html/project/notes.html 的文件，那么仅有 public_html 和 project 目录被搜索。</p>

<p>关于每目录单独配置的最后一个提示就是：要按顺序依次进行。任何介绍 Apache 调优的的文章都会告诉您，应通过 HostnameLookups off 指令禁用 DNS 查找，因为试图反向解析连接到您的服务器的所有 IP 地址无疑是浪费资源。然而，基于主机名的任何约束都会迫使 Web 服务器对客户机的 IP 地址执行反向查找，对其结果进行正向查找，以验证该名称的真实性。因此，避免使用基于客户主机名的访问控制，在必须使用时限定其作用域，这些都是明智的做法。</p>

<p>持久连接</p>

<p>一个客户机连接到 Web 服务器时，允许客户机通过同一个 TCP 连接发出多个请求，这减少了与多个连接相关的延迟。在一个 Web 页面引用了多幅图片时，这就很有用：客户机可以通过一个连接先请求页面，再请求所有图片。其缺点在于服务器上的 worker 进程必须等待客户机要关闭的会话，之后才能转到下一个请求。</p>

<p>Apache 使您能够配置如何处理持久连接（称为 keepalives）。httpd.conf 全局级的 KeepAlive 5 允许服务器在连接强制关闭之前处理一个连接上的 5 个请求。将此值设置为 0 将禁用持久连接。同样位于全局级上的 KeepAliveTimeout 确定在会话关闭之前，Apache 将等待另外一个连接多久。</p>

<p>持久连接的处理并非 “一刀切” 式的配置。对于某些 Web 站点，禁用 keepalives 更合适（KeepAlive 0）；而对于其他一些站点，启用它会带来巨大的收益。惟一的解决之道就是尝试使用这两种配置，自己观察哪种更合适。但若启用了 keepalives，使用较小的超时时间较为明智，例如 2，即 KeepAliveTimeout 2。这能确保希望发出另外一个请求的客户机有充足的时间，还能确保 worker 进程不会一直空闲，等待可能永远不会出现的下一个请求。</p>

<p>压缩</p>

<p>Web 服务器能够在将输出发回给客户机之前压缩它。这将使通过 Internet 发送的页面更小，代价是 Web 服务器上的 CPU 周期。对于那些负担得起 CPU 开销的服务器来说，这是提高页面下载速度的好办法 —— 页面压缩后大小变为原来的三分之一这种事情并不罕见。</p>

<p>图片通常已经是压缩过的，因此压缩应仅限于文本输出。Apache 通过 mod_deflate 提供压缩。尽管 mod_deflate 可轻松启用，但它涉及到太多的复杂性，很多手册都解释了这些复杂的内容。本文不介绍压缩的配置。</p>

<p>调优 PHP</p>

<p>PHP 是运行应用程序代码的引擎。应该仅安装计划使用的那些模块，并配置您的 Web 服务器，使之仅为脚本文件（通常是以 .php 结尾的那些文件）使用 PHP，而非所有静态文件。</p>

<p>操作码缓存</p>

<p>请求一个 PHP 脚本时，PHP 会读取该脚本，并将其编译为 Zend 操作码，这是要执行的代码的一种二进制表示形式。随后，此操作码由 PHP 执行并丢弃。操作码缓存将保存这个编译后的操作码，并在下一次调用该页面时重用它。这会节省很多时间。有多种缓存可用，我比较常用的是 eAccelerator。</p>

<p>要安装 eAccelerator，您的计算机上需要有 PHP 开发库。由于不同的 Linux 发布版存放文件的位置不同，所以最好直接从 eAccelerator 的 Web 站点获得安装说明（参见 参考资料 部分获得链接）。您的发布版也有可能已经包含了一个操作码缓存，只需安装即可。</p>

<p>无论如何在系统上安装 eAccelerator，都有一些配置选项需要注意。配置文件通常是 /etc/php.d/eaccelerator.ini。eaccelerator.shm_size 定义共享高速缓存的大小，编译后的脚本就存储在这里。该值的单位是兆字节（MB）。根据您的应用程序确定恰当的大小。eAccelerator 提供了一个脚本来显示缓存的状态，其中包含内存占用，64MB 是个不错的选择（eaccelerator.shm_size=&ldquo;64&#8221;）。如果您选择的值未被接受，那么必须修改内核的最大共享内存的大小。向 /etc/sysctl.conf 添加 kernel.shmmax=67108864，运行 sysctl -p 来使设置生效。kernel.shmmax 值的单位是字节。</p>

<p>如果共享内存的分配超出极限，eAccelerator 必须将旧脚本从内存中清除。默认情况下，这是被禁用的；eaccelerator.shm_ttl = &ldquo;60&rdquo; 指定：当 eAccelerator 用完共享内存时，60 秒内未被访问的所有脚本都将被清除。</p>

<p>另一种流行的 eAccelerator 替代工具是 Alternative PHP Cache（APC）。Zend 的厂商也提供了一种商业操作码缓存，包括一个进一步提高效率的优化器。</p>

<p>php.ini</p>

<p>PHP 的配置是在 php.ini 中完成的。四个重要的设置控制 PHP 可使用多少系统资源，如表 1 所列。</p>

<p>表 1. php.ini 中与资源相关的设置
设置  描述  建议值
max_execution_time  一个脚本可使用多少 CPU 秒 30
max_input_time  一个脚本等待输入数据的时间有多长（秒）   60
memory_limit    在被取消之前，一个脚本可使用多少内存（字节）  32M
output_buffering    数据发送给客户机之前，有多少数据（字节）需要缓存    4096</p>

<p>具体数字主要取决于您的应用程序。如果要从用户处接收大文件，那么 max_input_time 可能必须增加，可以在 php.ini 中修改，也可以通过代码重写它。与之类似，CPU 或内存占用较多的程序也可能需要更大的设置值。目标就是缓解超标程序的影响，因此不建议全局禁用这些设置。关于 max_execution_time，还有一点需要注意：它表示进程的 CPU 时间，而不是绝对时间。因此一个进行大量 I/O 和少量计算的程序的运行时间可能远远超过 max_execution_time。这也是 max_input_time 可以大于 max_execution_time 的原因所在。</p>

<p>PHP 可执行的日志记录数是可配置的。在生产环境中，禁用除最重要的日志以外的一切日志记录能够减少磁盘写操作。如果需要使用日志来排除问题，那么可以按需启用日志记录。error_reporting = E_COMPILE_ERROR|E_ERROR|E_CORE_ERROR 将启用足够的日志记录，使您发现问题，同时从脚本中消除大量无用的内容。</p>

<p><strong>三、MySQL数据库服务器优化</strong></p>

<p>关于 MySQL 调优</p>

<p>有 3 种方法可以加快 MySQL 服务器的运行速度，效率从低到高依次为：</p>

<ol>
<li>. 替换有问题的硬件。</li>
<li>. 对 MySQL 进程的设置进行调优。</li>
<li>. 对查询进行优化。</li>
</ol>


<p>替换有问题的硬件通常是我们的第一考虑，主要原因是数据库会占用大量资源。不过这种解决方案也就仅限于此了。实际上，您通常可以让中央处理器（CPU）或磁盘速度加倍，也可以让内存增大 4 到 8 倍。</p>

<p>第二种方法是对 MySQL 服务器（也称为 mysqld）进行调优。对这个进程进行调优意味着适当地分配内存，并让 mysqld 了解将会承受何种类型的负载。加快磁盘运行速度不如减少所需的磁盘访问次数。类似地，确保 MySQL 进程正确操作就意味着它花费在服务查询上的时间要多于花费在处理后台任务（如处理临时磁盘表或打开和关闭文件）上的时间。对 mysqld 进行调优是本文的重点。</p>

<p>最好的方法是确保查询已经进行了优化。这意味着对表应用了适当的索引，查询是按照可以充分利用 MySQL 功能的方式来编写的。尽管本文并没有包含查询调优方面的内容（很多著作中已经针对这个主题进行了探讨），不过它会配置 mysqld 来报告可能需要进行调优的查询。</p>

<p>虽然已经为这些任务指派了次序，但是仍然要注意硬件和 mysqld 的设置以利于适当地调优查询。机器速度慢也就罢了，我曾经见过速度很快的机器在运行设计良好的查询时由于负载过重而失败，因为 mysqld 被大量繁忙的工作所占用而不能服务查询。</p>

<p>记录慢速查询</p>

<p>在一个 SQL 服务器中，数据表都是保存在磁盘上的。索引为服务器提供了一种在表中查找特定数据行的方法，而不用搜索整个表。当必须要搜索整个表时，就称为表扫描。通常来说，您可能只希望获得表中数据的一个子集，因此全表扫描会浪费大量的磁盘 I/O，因此也就会浪费大量时间。当必须对数据进行连接时，这个问题就更加复杂了，因为必须要对连接两端的多行数据进行比较。</p>

<p>当然，表扫描并不总是会带来问题；有时读取整个表反而会比从中挑选出一部分数据更加有效（服务器进程中查询规划器用来作出这些决定）。如果索引的使用效率很低，或者根本就不能使用索引，则会减慢查询速度，而且随着服务器上的负载和表大小的增加，这个问题会变得更加显著。执行时间超过给定时间范围的查询就称为慢速查询。</p>

<p>您可以配置 mysqld 将这些慢速查询记录到适当命名的慢速查询日志中。管理员然后会查看这个日志来帮助他们确定应用程序中有哪些部分需要进一步调查。清单 1 给出了要启用慢速查询日志需要在 my.cnf 中所做的配置。</p>

<p>清单 1. 启用 MySQL 慢速查询日志
[mysqld]
; enable the slow query log, default 10 seconds
log-slow-queries
; log queries taking longer than 5 seconds
long_query_time = 5
; log queries that don&rsquo;t use indexes even if they take less than long_query_time
; MySQL 4.1 and newer only
log-queries-not-using-indexes
复制代码
这三个设置一起使用，可以记录执行时间超过 5 秒和没有使用索引的查询。请注意有关 log-queries-not-using-indexes 的警告：您必须使用 MySQL 4.1 或更高版本。慢速查询日志都保存在 MySQL 数据目录中，名为 hostname-slow.log。如果希望使用一个不同的名字或路径，可以在 my.cnf 中使用 log-slow-queries = /new/path/to/file 实现此目的。</p>

<p>阅读慢速查询日志最好是通过 mysqldumpslow 命令进行。指定日志文件的路径，就可以看到一个慢速查询的排序后的列表，并且还显示了它们在日志文件中出现的次数。一个非常有用的特性是 mysqldumpslow 在比较结果之前，会删除任何用户指定的数据，因此对同一个查询的不同调用被计为一次；这可以帮助找出需要工作量最多的查询。</p>

<p>对查询进行缓存</p>

<p>很多 LAMP 应用程序都严重依赖于数据库，但却会反复执行相同的查询。每次执行查询时，数据库都必须要执行相同的工作 —— 对查询进行分析，确定如何执行查询，从磁盘中加载信息，然后将结果返回给客户机。MySQL 有一个特性称为查询缓存，它将（后面会用到的）查询结果保存在内存中。在很多情况下，这会极大地提高性能。不过，问题是查询缓存在默认情况下是禁用的。</p>

<p>将 query_cache_size = 32M 添加到 /etc/my.conf 中可以启用 32MB 的查询缓存。</p>

<p>监视查询缓存</p>

<p>在启用查询缓存之后，重要的是要理解它是否得到了有效的使用。MySQL 有几个可以查看的变量，可以用来了解缓存中的情况。清单 2 给出了缓存的状态。</p>

<p>清单 2. 显示查询缓存的统计信息
mysql> SHOW STATUS LIKE &lsquo;qcache%&rsquo;;
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;+
| Variable_name           | Value      |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;+
| Qcache_free_blocks      | 5216       |
| Qcache_free_memory      | 14640664   |
| Qcache_hits             | 2581646882 |
| Qcache_inserts          | 360210964  |
| Qcache_lowmem_prunes    | 281680433  |
| Qcache_not_cached       | 79740667   |
| Qcache_queries_in_cache | 16927      |
| Qcache_total_blocks     | 47042      |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;+
8 rows in set (0.00 sec)
复制代码
这些项的解释如表 1 所示。
变量名   说明</p>

<pre><code>                    Qcache_free_blocks                      缓存中相邻内存块的个数。数目大说明可能有碎片。FLUSH QUERY CACHE 会对缓存中的碎片进行整理，从而得到一个空闲块。
                    Qcache_free_memory                      缓存中的空闲内存。
                    Qcache_hits                     每次查询在缓存中命中时就增大。
                    Qcache_inserts                      每次插入一个查询时就增大。命中次数除以插入次数就是不中比率；用 1 减去这个值就是命中率。在上面这个例子中，大约有 87% 的查询都在缓存中命中。
                    Qcache_lowmem_prunes                        缓存出现内存不足并且必须要进行清理以便为更多查询提供空间的次数。这个数字最好长时间来看；如果这个数字在不断增长，就表示可能碎片非常严重，或者内存很少。（上面的 free_blocks 和            free_memory 可以告诉您属于哪种情况）。
                    Qcache_not_cached                       不适合进行缓存的查询的数量，通常是由于这些查询不是 SELECT 语句。
                    Qcache_queries_in_cache                     当前缓存的查询（和响应）的数量。
                    Qcache_total_blocks                     缓存中块的数量。
</code></pre>

<p>通常，间隔几秒显示这些变量就可以看出区别，这可以帮助确定缓存是否正在有效地使用。运行 FLUSH STATUS 可以重置一些计数器，如果服务器已经运行了一段时间，这会非常有帮助。</p>

<p>使用非常大的查询缓存，期望可以缓存所有东西，这种想法非常诱人。由于 mysqld 必须要对缓存进行维护，例如当内存变得很低时执行剪除，因此服务器可能会在试图管理缓存时而陷入困境。作为一条规则，如果 FLUSH QUERY CACHE 占用了很长时间，那就说明缓存太大了。</p>

<p>强制限制</p>

<p>您可以在 mysqld 中强制一些限制来确保系统负载不会导致资源耗尽的情况出现。清单 3 给出了 my.cnf 中与资源有关的一些重要设置。</p>

<p>清单 3. MySQL 资源设置
max_connections=500
wait_timeout=10
max_connect_errors = 100
复制代码
连接最大个数是在第一行中进行管理的。与 Apache 中的 MaxClients 类似，其想法是确保只建立服务允许数目的连接。要确定服务器上目前建立过的最大连接数，请执行 SHOW STATUS LIKE &lsquo;max_used_connections&#8217;。</p>

<p>第 2 行告诉 mysqld 终止所有空闲时间超过 10 秒的连接。在 LAMP 应用程序中，连接数据库的时间通常就是 Web 服务器处理请求所花费的时间。有时候，如果负载过重，连接会挂起，并且会占用连接表空间。如果有多个交互用户或使用了到数据库的持久连接，那么将这个值设低一点并不可取！</p>

<p>最后一行是一个安全的方法。如果一个主机在连接到服务器时有问题，并重试很多次后放弃，那么这个主机就会被锁定，直到 FLUSH HOSTS 之后才能运行。默认情况下，10 次失败就足以导致锁定了。将这个值修改为 100 会给服务器足够的时间来从问题中恢复。如果重试 100 次都无法建立连接，那么使用再高的值也不会有太多帮助，可能它根本就无法连接。</p>

<p>缓冲区和缓存</p>

<p>MySQL 支持超过 100 个的可调节设置；但是幸运的是，掌握少数几个就可以满足大部分需要。查找这些设置的正确值可以通过 SHOW STATUS 命令查看状态变量，从中可以确定 mysqld 的运作情况是否符合我们的预期。给缓冲区和缓存分配的内存不能超过系统中的现有内存，因此调优通常都需要进行一些妥协。</p>

<p>MySQL 可调节设置可以应用于整个 mysqld 进程，也可以应用于单个客户机会话。</p>

<p>服务器端的设置</p>

<p>每个表都可以表示为磁盘上的一个文件，必须先打开，后读取。为了加快从文件中读取数据的过程，mysqld 对这些打开文件进行了缓存，其最大数目由 /etc/mysqld.conf 中的 table_cache 指定。清单 4 给出了显示与打开表有关的活动的方式。</p>

<p>清单 4. 显示打开表的活动
mysql> SHOW STATUS LIKE &lsquo;open%tables&rsquo;;
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&ndash;+
| Variable_name | Value |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&ndash;+
| Open_tables   | 5000  |
| Opened_tables | 195   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&ndash;+
2 rows in set (0.00 sec)
复制代码
清单 4 说明目前有 5,000 个表是打开的，有 195 个表需要打开，因为现在缓存中已经没有可用文件描述符了（由于统计信息在前面已经清除了，因此可能会存在 5,000 个打开表中只有 195 个打开记录的情况）。如果 Opened_tables 随着重新运行 SHOW STATUS 命令快速增加，就说明缓存命中率不够。如果 Open_tables 比 table_cache 设置小很多，就说明该值太大了（不过有空间可以增长总不是什么坏事）。例如，使用 table_cache = 5000 可以调整表的缓存。</p>

<p>与表的缓存类似，对于线程来说也有一个缓存。 mysqld 在接收连接时会根据需要生成线程。在一个连接变化很快的繁忙服务器上，对线程进行缓存便于以后使用可以加快最初的连接。</p>

<p>清单 5 显示如何确定是否缓存了足够的线程。</p>

<p>清单 5. 显示线程使用统计信息
mysql> SHOW STATUS LIKE &lsquo;threads%&rsquo;;
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;+
| Variable_name     | Value  |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;+
| Threads_cached    | 27     |
| Threads_connected | 15     |
| Threads_created   | 838610 |
| Threads_running   | 3      |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;+
4 rows in set (0.00 sec)
复制代码
此处重要的值是 Threads_created，每次 mysqld 需要创建一个新线程时，这个值都会增加。如果这个数字在连续执行 SHOW STATUS 命令时快速增加，就应该尝试增大线程缓存。例如，可以在 my.cnf 中使用 thread_cache = 40 来实现此目的。</p>

<p>关键字缓冲区保存了 MyISAM 表的索引块。理想情况下，对于这些块的请求应该来自于内存，而不是来自于磁盘。清单 6 显示了如何确定有多少块是从磁盘中读取的，以及有多少块是从内存中读取的。</p>

<p>清单 6. 确定关键字效率
mysql> show status like &lsquo;%key_read%&rsquo;;
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| Variable_name     | Value     |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| Key_read_requests | 163554268 |
| Key_reads         | 98247     |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
2 rows in set (0.00 sec)
复制代码
Key_reads 代表命中磁盘的请求个数， Key_read_requests 是总数。命中磁盘的读请求数除以读请求总数就是不中比率 —— 在本例中每 1,000 个请求，大约有 0.6 个没有命中内存。如果每 1,000 个请求中命中磁盘的数目超过 1 个，就应该考虑增大关键字缓冲区了。例如，key_buffer = 384M 会将缓冲区设置为 384MB。</p>

<p>临时表可以在更高级的查询中使用，其中数据在进一步进行处理（例如 GROUP BY 字句）之前，都必须先保存到临时表中；理想情况下，在内存中创建临时表。但是如果临时表变得太大，就需要写入磁盘中。清单 7 给出了与临时表创建有关的统计信息。</p>

<p>清单 7. 确定临时表的使用
mysql> SHOW STATUS LIKE &lsquo;created_tmp%&rsquo;;
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&ndash;+
| Variable_name           | Value |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&ndash;+
| Created_tmp_disk_tables | 30660 |
| Created_tmp_files       | 2     |
| Created_tmp_tables      | 32912 |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&ndash;+
3 rows in set (0.00 sec)
复制代码
每次使用临时表都会增大 Created_tmp_tables；基于磁盘的表也会增大 Created_tmp_disk_tables。对于这个比率，并没有什么严格的规则，因为这依赖于所涉及的查询。长时间观察 Created_tmp_disk_tables 会显示所创建的磁盘表的比率，您可以确定设置的效率。 tmp_table_size 和 max_heap_table_size 都可以控制临时表的最大大小，因此请确保在 my.cnf 中对这两个值都进行了设置。</p>

<p>每个会话的设置</p>

<p>下面这些设置针对于每个会话。在设置这些数字时要十分谨慎，因为它们在乘以可能存在的连接数时候，这些选项表示大量的内存！您可以通过代码修改会话中的这些数字，或者在 my.cnf 中为所有会话修改这些设置。</p>

<p>当 MySQL 必须要进行排序时，就会在从磁盘上读取数据时分配一个排序缓冲区来存放这些数据行。如果要排序的数据太大，那么数据就必须保存到磁盘上的临时文件中，并再次进行排序。如果 sort_merge_passes 状态变量很大，这就指示了磁盘的活动情况。清单 8 给出了一些与排序相关的状态计数器信息。</p>

<p>清单 8. 显示排序统计信息
mysql> SHOW STATUS LIKE &ldquo;sort%&rdquo;;
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&ndash;+
| Variable_name     | Value   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&ndash;+
| Sort_merge_passes | 1       |
| Sort_range        | 79192   |
| Sort_rows         | 2066532 |
| Sort_scan         | 44006   |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&ndash;+
4 rows in set (0.00 sec)
复制代码
如果 sort_merge_passes 很大，就表示需要注意 sort_buffer_size。例如， sort_buffer_size = 4M 将排序缓冲区设置为 4MB。</p>

<p>MySQL 也会分配一些内存来读取表。理想情况下，索引提供了足够多的信息，可以只读入所需要的行，但是有时候查询（设计不佳或数据本性使然）需要读取表中大量数据。要理解这种行为，需要知道运行了多少个 SELECT 语句，以及需要读取表中的下一行数据的次数（而不是通过索引直接访问）。实现这种功能的命令如清单 9 所示。</p>

<p>清单 9. 确定表扫描比率
mysql> SHOW STATUS LIKE &ldquo;com_select&rdquo;;
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;+
| Variable_name | Value  |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;+
| Com_select    | 318243 |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;+
1 row in set (0.00 sec)</p>

<p>mysql> SHOW STATUS LIKE &ldquo;handler_read_rnd_next&rdquo;;
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| Variable_name         | Value     |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
| Handler_read_rnd_next | 165959471 |
+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;+
1 row in set (0.00 sec)
复制代码
Handler_read_rnd_next / Com_select 得出了表扫描比率 —— 在本例中是 521:1。如果该值超过 4000，就应该查看 read_buffer_size，例如 read_buffer_size = 4M。如果这个数字超过了 8M，就应该与开发人员讨论一下对这些查询进行调优了！</p>

<p>3 个必不可少的工具</p>

<p>尽管在了解具体设置时，SHOW STATUS 命令会非常有用，但是您还需要一些工具来解释 mysqld 所提供的大量数据。我发现有 3 个工具是必不可少的；在 参考资料 一节中您可以找到相应的链接。</p>

<p>大部分系统管理员都非常熟悉 top 命令，它为任务所消耗的 CPU 和内存提供了一个不断更新的视图。 mytop 对 top 进行了仿真；它为所有连接上的客户机以及它们正在运行的查询提供了一个视图。mytop 还提供了一个有关关键字缓冲区和查询缓存效率的实时数据和历史数据，以及有关正在运行的查询的统计信息。这是一个很有用的工具，可以查看系统中（比如 10 秒钟之内）的状况，您可以获得有关服务器健康信息的视图，并显示导致问题的任何连接。</p>

<p>mysqlard 是一个连接到 MySQL 服务器上的守护程序，负责每 5 分钟搜集一次数据，并将它们存储到后台的一个 Round Robin Database 中。有一个 Web 页面会显示这些数据，例如表缓存的使用情况、关键字效率、连接上的客户机以及临时表的使用情况。尽管 mytop 提供了服务器健康信息的快照，但是 mysqlard 则提供了长期的健康信息。作为奖励，mysqlard 使用自己搜集到的一些信息针对如何对服务器进行调优给出一些建议。</p>

<p>搜集 SHOW STATUS 信息的另外一个工具是 mysqlreport。其报告要远比 mysqlard 更加复杂，因为需要对服务器的每个方面都进行分析。这是对服务器进行调优的一个非常好的工具，因为它对状态变量进行适当计算来帮助确定需要修正哪些问题。</p>

<p><strong>原文地址: 1、<a href="http://club.topsage.com/thread-221396-1-1.html">架构</a>；2、<a href="http://club.topsage.com/thread-221401-1-1.html">Apache</a>；3、<a href="http://club.topsage.com/thread-221406-1-1.html">MySQL</a></strong></p>

<p>Included file &lsquo;JB/setup&rsquo; not found in _includes directory</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Hello jekyll world]]></title>
    <link href="http://apiaceae.github.io/blog/2013/09/02/hello-jekyll-world/"/>
    <updated>2013-09-02T00:00:00+08:00</updated>
    <id>http://apiaceae.github.io/blog/2013/09/02/hello-jekyll-world</id>
    <content type="html"><![CDATA[<p>Included file &lsquo;JB/setup&rsquo; not found in _includes directory</p>

<p>h1 这里仅仅是一个测试</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[使用PRY代替RAILS CONSOLE]]></title>
    <link href="http://apiaceae.github.io/blog/2013/02/23/%E4%BD%BF%E7%94%A8pry%E4%BB%A3%E6%9B%BFrails-console/"/>
    <updated>2013-02-23T00:00:00+08:00</updated>
    <id>http://apiaceae.github.io/blog/2013/02/23/使用pry代替rails-console</id>
    <content type="html"><![CDATA[<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">rails默认的调度工具是ruby-debug19，启动时还要加上&rdquo;&ndash;debug&rdquo;参数，或许你觉得用起来也还可以。但如果你用过pry，你会发现原来可以还这么方便，ruby-debug19是那么的简陋。<br style="margin: 0px; padding: 0px;" />以前还整过一堆插件来增强irb的功能，现在有了pry，默认配置就够用了，还有rails console也可以歇歇了。</p>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">&nbsp;</p>
<h3 style="margin: 0px; padding: 0px; font-size: 14px; color: #008800; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; line-height: 20px; text-align: left; background-color: #ffffff;">安装</h3>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">在Gemfile中添加</p>
<pre class="brush: ruby; title: ; notranslate" style="margin: 5px 0px; padding: 8px 10px; background-color: #f1f5f6; border: 1px dashed #b0bec7; font-family: 'Courier New', Courier, monospace, Fixed; overflow: auto; color: #333333; font-size: 14px; line-height: 20px; text-align: left;" title="">gem 'pry', :group =&amp;gt; :development
</pre>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">然后执行</p>
<pre class="brush: bash; title: ; notranslate" style="margin: 5px 0px; padding: 8px 10px; background-color: #f1f5f6; border: 1px dashed #b0bec7; font-family: 'Courier New', Courier, monospace, Fixed; overflow: auto; color: #333333; font-size: 14px; line-height: 20px; text-align: left;" title="">bundle install
</pre>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">即可。</p>
<h3 style="margin: 0px; padding: 0px; font-size: 14px; color: #008800; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; line-height: 20px; text-align: left; background-color: #ffffff;">它可以这样用</h3>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">用pry代替irb方法，直接运行：</p>
<pre class="brush: bash; title: ; notranslate" style="margin: 5px 0px; padding: 8px 10px; background-color: #f1f5f6; border: 1px dashed #b0bec7; font-family: 'Courier New', Courier, monospace, Fixed; overflow: auto; color: #333333; font-size: 14px; line-height: 20px; text-align: left;" title="">pry
</pre>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">用pry代替rails console方法，运行：</p>
<pre class="brush: bash; title: ; notranslate" style="margin: 5px 0px; padding: 8px 10px; background-color: #f1f5f6; border: 1px dashed #b0bec7; font-family: 'Courier New', Courier, monospace, Fixed; overflow: auto; color: #333333; font-size: 14px; line-height: 20px; text-align: left;" title="">pry -r ./config/environment.rb
</pre>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">调试rails方法：<br style="margin: 0px; padding: 0px;" />直接在要调试的地方添加&rdquo;binding.pry&rdquo;，&rdquo;rails server&rdquo;当运行到这行代码时会自动调出一个pry终端，可以在这里进行交互。退出调试用&rdquo;exit-all&rdquo;。如：</p>
<pre class="brush: ruby; title: ; notranslate" style="margin: 5px 0px; padding: 8px 10px; background-color: #f1f5f6; border: 1px dashed #b0bec7; font-family: 'Courier New', Courier, monospace, Fixed; overflow: auto; color: #333333; font-size: 14px; line-height: 20px; text-align: left;" title="">#/app/controllers/articles_controller.rb
def index
  @articles = Article.all
  binding.pry
end
</pre>
<h3 style="margin: 0px; padding: 0px; font-size: 14px; color: #008800; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; line-height: 20px; text-align: left; background-color: #ffffff;">常用命令</h3>
<ul style="margin: 0px; padding: 0px 0px 10px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">
<li style="margin: 0px; padding: 0px 0px 0px 20px; list-style-position: inside;">cd: 这可不是切换目录的，而是切换类。如&rdquo;cd Article&rdquo;会进入Article类中，&rdquo;Article.all&rdquo;可直接缩写为&rdquo;all&rdquo;</li>
<li style="margin: 0px; padding: 0px 0px 0px 20px; list-style-position: inside;">nesting: cd切来切去如果迷了路，用它可以看当前在哪个类下面。我倒觉得如果名字改为&rdquo;pwd&rdquo;会更好。</li>
<li style="margin: 0px; padding: 0px 0px 0px 20px; list-style-position: inside;">ls: 查看一些信息，ls -h查看帮助，ls -m查看实例方法，ls -M查看类方法，ls -p查看private方法。</li>
<li style="margin: 0px; padding: 0px 0px 0px 20px; list-style-position: inside;">show-doc Array#in_groups_of：查看文档。</li>
<li style="margin: 0px; padding: 0px 0px 0px 20px; list-style-position: inside;">show-method -l Array#in_groups_of：查看方法的源代码，-l显示行号。</li>
<li style="margin: 0px; padding: 0px 0px 0px 20px; list-style-position: inside;">edit-method Array#in_groups_of：调出nano来编辑代码，如果是能调出vim就好啦。(后来发现其实很简单，见后面。)</li>
<li style="margin: 0px; padding: 0px 0px 0px 20px; list-style-position: inside;">help：显示帮助</li>
</ul>
<h3 style="margin: 0px; padding: 0px; font-size: 14px; color: #008800; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; line-height: 20px; text-align: left; background-color: #ffffff;">调试Rails</h3>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">pry默认没有调试中经常用到的下一步，上一步等命令，要安装</p>
<pre class="brush: plain; title: ; notranslate" style="margin: 5px 0px; padding: 8px 10px; background-color: #f1f5f6; border: 1px dashed #b0bec7; font-family: 'Courier New', Courier, monospace, Fixed; overflow: auto; color: #333333; font-size: 14px; line-height: 20px; text-align: left;" title="">gem "pry-nav"
</pre>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">然后就可以使用step, next, continue来跳来跳去了。</p>
<h3 style="margin: 0px; padding: 0px; font-size: 14px; color: #008800; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; line-height: 20px; text-align: left; background-color: #ffffff;">edit和edit-method能自动调用vim</h3>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">默认调出nano编辑源代码是因为系统环境变量中没有$EDITOR的缘故，有两种方法改为vim。<br style="margin: 0px; padding: 0px;" />1、添加环境变量$EDITOR=&rdquo;vim&rdquo;<br style="margin: 0px; padding: 0px;" />2、新建~/.pryrc配置文件，添加</p>
<pre class="brush: plain; title: ; notranslate" style="margin: 5px 0px; padding: 8px 10px; background-color: #f1f5f6; border: 1px dashed #b0bec7; font-family: 'Courier New', Courier, monospace, Fixed; overflow: auto; color: #333333; font-size: 14px; line-height: 20px; text-align: left;" title="">Pry.config.editor = "vim"
</pre>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">更多参考：</p>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">http://railscasts.com/episodes/280-pry-with-rails?view=asciicast</p>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">https://github.com/pry/pry</p>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">http://tyok.org/prying_ruby/</p>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">http://blog.tyraeltong.com/blog/2011/10/14/introducing-pry</p>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">http://gnepud.tumblr.com</p>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">http://rubyer.me/blog/1585/</p>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">下面是Pry&mdash;Hirb-awsom-print三个Gem包配合使用的.pryrc配置文件</p>
<div id="file-gistfile1-rb-LC1" class="line" style="margin: 0px; padding: 0px;"><span class="no" style="margin: 0px; padding: 0px; color: #008080;">Pry</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">config</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">editor</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">=</span> <span class="s2" style="margin: 0px; padding: 0px; color: #dd1144;">&#8220;mvim&#8221;</span></div>
<div id="file-gistfile1-rb-LC2" class="line" style="margin: 0px; padding: 0px;">&nbsp;</div>
<div id="file-gistfile1-rb-LC3" class="line" style="margin: 0px; padding: 0px;"><span class="c1" style="margin: 0px; padding: 0px; color: #999988; font-style: italic;"># Launch Pry with access to the entire Rails stack.</span></div>
<div id="file-gistfile1-rb-LC4" class="line" style="margin: 0px; padding: 0px;"><span class="c1" style="margin: 0px; padding: 0px; color: #999988; font-style: italic;"># If you have Pry in your Gemfile, you can pass: ./script/console &#8211;irb=pry instead.</span></div>
<div id="file-gistfile1-rb-LC5" class="line" style="margin: 0px; padding: 0px;"><span class="c1" style="margin: 0px; padding: 0px; color: #999988; font-style: italic;"># If you don&#8217;t, you can load it through the lines below :)</span></div>
<div id="file-gistfile1-rb-LC6" class="line" style="margin: 0px; padding: 0px;"><span class="n" style="margin: 0px; padding: 0px;">rails</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">=</span> <span class="no" style="margin: 0px; padding: 0px; color: #008080;">File</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">join</span> <span class="no" style="margin: 0px; padding: 0px; color: #008080;">Dir</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">getwd</span><span class="p" style="margin: 0px; padding: 0px;">,</span> <span class="s1" style="margin: 0px; padding: 0px; color: #dd1144;">&#8216;config&#8217;</span><span class="p" style="margin: 0px; padding: 0px;">,</span> <span class="s1" style="margin: 0px; padding: 0px; color: #dd1144;">&#8216;environment.rb&#8217;</span></div>
<div id="file-gistfile1-rb-LC7" class="line" style="margin: 0px; padding: 0px;">&nbsp;</div>
<div id="file-gistfile1-rb-LC8" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">if</span> <span class="no" style="margin: 0px; padding: 0px; color: #008080;">File</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">exist?</span><span class="p" style="margin: 0px; padding: 0px;">(</span><span class="n" style="margin: 0px; padding: 0px;">rails</span><span class="p" style="margin: 0px; padding: 0px;">)</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">&amp;&amp;</span> <span class="no" style="margin: 0px; padding: 0px; color: #008080;">ENV</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">[</span><span class="s1" style="margin: 0px; padding: 0px; color: #dd1144;">&#8216;SKIP_RAILS&#8217;</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">].</span><span class="n" style="margin: 0px; padding: 0px;">nil?</span></div>
<div id="file-gistfile1-rb-LC9" class="line" style="margin: 0px; padding: 0px;"><span class="nb" style="margin: 0px; padding: 0px; color: #0086b3;">require</span> <span class="n" style="margin: 0px; padding: 0px;">rails</span></div>
<div id="file-gistfile1-rb-LC10" class="line" style="margin: 0px; padding: 0px;">&nbsp;</div>
<div id="file-gistfile1-rb-LC11" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">if</span> <span class="no" style="margin: 0px; padding: 0px; color: #008080;">Rails</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">version</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">[</span><span class="mi" style="margin: 0px; padding: 0px; color: #009999;">0</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">.</span><span class="mi" style="margin: 0px; padding: 0px; color: #009999;">0</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">]</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">==</span> <span class="s2" style="margin: 0px; padding: 0px; color: #dd1144;">&#8220;2&#8221;</span></div>
<div id="file-gistfile1-rb-LC12" class="line" style="margin: 0px; padding: 0px;"><span class="nb" style="margin: 0px; padding: 0px; color: #0086b3;">require</span> <span class="s1" style="margin: 0px; padding: 0px; color: #dd1144;">&#8216;console_app&#8217;</span></div>
<div id="file-gistfile1-rb-LC13" class="line" style="margin: 0px; padding: 0px;"><span class="nb" style="margin: 0px; padding: 0px; color: #0086b3;">require</span> <span class="s1" style="margin: 0px; padding: 0px; color: #dd1144;">&#8216;console_with_helpers&#8217;</span></div>
<div id="file-gistfile1-rb-LC14" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">elsif</span> <span class="no" style="margin: 0px; padding: 0px; color: #008080;">Rails</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">version</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">[</span><span class="mi" style="margin: 0px; padding: 0px; color: #009999;">0</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">.</span><span class="mi" style="margin: 0px; padding: 0px; color: #009999;">0</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">]</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">==</span> <span class="s2" style="margin: 0px; padding: 0px; color: #dd1144;">&#8220;3&#8221;</span></div>
<div id="file-gistfile1-rb-LC15" class="line" style="margin: 0px; padding: 0px;"><span class="nb" style="margin: 0px; padding: 0px; color: #0086b3;">require</span> <span class="s1" style="margin: 0px; padding: 0px; color: #dd1144;">&#8216;rails/console/app&#8217;</span></div>
<div id="file-gistfile1-rb-LC16" class="line" style="margin: 0px; padding: 0px;"><span class="nb" style="margin: 0px; padding: 0px; color: #0086b3;">require</span> <span class="s1" style="margin: 0px; padding: 0px; color: #dd1144;">&#8216;rails/console/helpers&#8217;</span></div>
<div id="file-gistfile1-rb-LC17" class="line" style="margin: 0px; padding: 0px;"><span class="c1" style="margin: 0px; padding: 0px; color: #999988; font-style: italic;"># Show sql output</span></div>
<div id="file-gistfile1-rb-LC18" class="line" style="margin: 0px; padding: 0px;"><span class="ss" style="margin: 0px; padding: 0px; color: #990073;">ActiveRecord</span><span class="p" style="margin: 0px; padding: 0px;">:</span><span class="ss" style="margin: 0px; padding: 0px; color: #990073;">:Base</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">logger</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">=</span> <span class="no" style="margin: 0px; padding: 0px; color: #008080;">Logger</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">new</span><span class="p" style="margin: 0px; padding: 0px;">(</span><span class="no" style="margin: 0px; padding: 0px; color: #008080;">STDOUT</span><span class="p" style="margin: 0px; padding: 0px;">)</span> <span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">if</span> <span class="n" style="margin: 0px; padding: 0px;">defined?</span> <span class="ss" style="margin: 0px; padding: 0px; color: #990073;">ActiveRecord</span><span class="p" style="margin: 0px; padding: 0px;">:</span><span class="ss" style="margin: 0px; padding: 0px; color: #990073;">:Base</span></div>
<div id="file-gistfile1-rb-LC19" class="line" style="margin: 0px; padding: 0px;"><span class="c1" style="margin: 0px; padding: 0px; color: #999988; font-style: italic;"># Add reload! command if rails version &gt; 3.2</span></div>
<div id="file-gistfile1-rb-LC20" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">if</span> <span class="no" style="margin: 0px; padding: 0px; color: #008080;">Rails</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">version</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">[</span><span class="mi" style="margin: 0px; padding: 0px; color: #009999;">2</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">.</span><span class="mi" style="margin: 0px; padding: 0px; color: #009999;">2</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">].</span><span class="n" style="margin: 0px; padding: 0px;">to_i</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">&gt;=</span> <span class="mi" style="margin: 0px; padding: 0px; color: #009999;">2</span></div>
<div id="file-gistfile1-rb-LC21" class="line" style="margin: 0px; padding: 0px;"><span class="kp" style="margin: 0px; padding: 0px; font-weight: bold;">include</span> <span class="ss" style="margin: 0px; padding: 0px; color: #990073;">Rails</span><span class="p" style="margin: 0px; padding: 0px;">:</span><span class="ss" style="margin: 0px; padding: 0px; color: #990073;">:ConsoleMethods</span></div>
<div id="file-gistfile1-rb-LC22" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">end</span></div>
<div id="file-gistfile1-rb-LC23" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">else</span></div>
<div id="file-gistfile1-rb-LC24" class="line" style="margin: 0px; padding: 0px;"><span class="nb" style="margin: 0px; padding: 0px; color: #0086b3;">warn</span> <span class="s2" style="margin: 0px; padding: 0px; color: #dd1144;">&#8220;[WARN] cannot load Rails console commands (Not on Rails2 or Rails3?)&#8221;</span></div>
<div id="file-gistfile1-rb-LC25" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">end</span></div>
<div id="file-gistfile1-rb-LC26" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">end</span></div>
<div id="file-gistfile1-rb-LC27" class="line" style="margin: 0px; padding: 0px;">&nbsp;</div>
<div id="file-gistfile1-rb-LC28" class="line" style="margin: 0px; padding: 0px;">&nbsp;</div>
<div id="file-gistfile1-rb-LC29" class="line" style="margin: 0px; padding: 0px;"><span class="c1" style="margin: 0px; padding: 0px; color: #999988; font-style: italic;"># To edit the method given by editor mvim</span></div>
<div id="file-gistfile1-rb-LC30" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">class</span> <span class="nc" style="margin: 0px; padding: 0px; font-weight: bold; color: #445588;">Object</span></div>
<div id="file-gistfile1-rb-LC31" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">def</span> <span class="nf" style="margin: 0px; padding: 0px; font-weight: bold; color: #990000;">mvim</span><span class="p" style="margin: 0px; padding: 0px;">(</span><span class="n" style="margin: 0px; padding: 0px;">method_name</span><span class="p" style="margin: 0px; padding: 0px;">)</span></div>
<div id="file-gistfile1-rb-LC32" class="line" style="margin: 0px; padding: 0px;"><span class="n" style="margin: 0px; padding: 0px;">file</span><span class="p" style="margin: 0px; padding: 0px;">,</span> <span class="n" style="margin: 0px; padding: 0px;">line</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">=</span> <span class="nb" style="margin: 0px; padding: 0px; color: #0086b3;">method</span><span class="p" style="margin: 0px; padding: 0px;">(</span><span class="n" style="margin: 0px; padding: 0px;">method_name</span><span class="p" style="margin: 0px; padding: 0px;">)</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">source_location</span></div>
<div id="file-gistfile1-rb-LC33" class="line" style="margin: 0px; padding: 0px;"><span class="sb" style="margin: 0px; padding: 0px; color: #dd1144;">`mvim &#8217;</span><span class="si" style="margin: 0px; padding: 0px; color: #dd1144;">#{</span><span class="n" style="margin: 0px; padding: 0px;">file</span><span class="si" style="margin: 0px; padding: 0px; color: #dd1144;">}</span><span class="sb" style="margin: 0px; padding: 0px; color: #dd1144;">&#8217; +</span><span class="si" style="margin: 0px; padding: 0px; color: #dd1144;">#{</span><span class="n" style="margin: 0px; padding: 0px;">line</span><span class="si" style="margin: 0px; padding: 0px; color: #dd1144;">}</span><span class="sb" style="margin: 0px; padding: 0px; color: #dd1144;">`</span></div>
<div id="file-gistfile1-rb-LC34" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">end</span></div>
<div id="file-gistfile1-rb-LC35" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">end</span></div>
<div id="file-gistfile1-rb-LC36" class="line" style="margin: 0px; padding: 0px;">&nbsp;</div>
<div id="file-gistfile1-rb-LC37" class="line" style="margin: 0px; padding: 0px;">&nbsp;</div>
<div id="file-gistfile1-rb-LC38" class="line" style="margin: 0px; padding: 0px;"><span class="c1" style="margin: 0px; padding: 0px; color: #999988; font-style: italic;"># Break out of the Bundler jail</span></div>
<div id="file-gistfile1-rb-LC39" class="line" style="margin: 0px; padding: 0px;"><span class="c1" style="margin: 0px; padding: 0px; color: #999988; font-style: italic;"># from https://github.com/ConradIrwin/pry-debundle/blob/master/lib/pry-debundle.rb</span></div>
<div id="file-gistfile1-rb-LC40" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">if</span> <span class="n" style="margin: 0px; padding: 0px;">defined?</span> <span class="no" style="margin: 0px; padding: 0px; color: #008080;">Bundler</span></div>
<div id="file-gistfile1-rb-LC41" class="line" style="margin: 0px; padding: 0px;"><span class="no" style="margin: 0px; padding: 0px; color: #008080;">Gem</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">post_reset_hooks</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">reject!</span> <span class="p" style="margin: 0px; padding: 0px;">{</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">|</span><span class="n" style="margin: 0px; padding: 0px;">hook</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">|</span> <span class="n" style="margin: 0px; padding: 0px;">hook</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">source_location</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">first</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">=~</span> <span class="sr" style="margin: 0px; padding: 0px; color: #009926;">%r{/bundler/}</span> <span class="p" style="margin: 0px; padding: 0px;">}</span></div>
<div id="file-gistfile1-rb-LC42" class="line" style="margin: 0px; padding: 0px;"><span class="ss" style="margin: 0px; padding: 0px; color: #990073;">Gem</span><span class="p" style="margin: 0px; padding: 0px;">:</span><span class="ss" style="margin: 0px; padding: 0px; color: #990073;">:Specification</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">reset</span></div>
<div id="file-gistfile1-rb-LC43" class="line" style="margin: 0px; padding: 0px;"><span class="nb" style="margin: 0px; padding: 0px; color: #0086b3;">load</span> <span class="s1" style="margin: 0px; padding: 0px; color: #dd1144;">&#8216;rubygems/custom_require.rb&#8217;</span></div>
<div id="file-gistfile1-rb-LC44" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">end</span></div>
<div id="file-gistfile1-rb-LC45" class="line" style="margin: 0px; padding: 0px;">&nbsp;</div>
<div id="file-gistfile1-rb-LC46" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">if</span> <span class="n" style="margin: 0px; padding: 0px;">defined?</span> <span class="no" style="margin: 0px; padding: 0px; color: #008080;">Rails</span></div>
<div id="file-gistfile1-rb-LC47" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">begin</span></div>
<div id="file-gistfile1-rb-LC48" class="line" style="margin: 0px; padding: 0px;"><span class="nb" style="margin: 0px; padding: 0px; color: #0086b3;">require</span> <span class="s1" style="margin: 0px; padding: 0px; color: #dd1144;">&#8216;hirb&#8217;</span></div>
<div id="file-gistfile1-rb-LC49" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">rescue</span> <span class="no" style="margin: 0px; padding: 0px; color: #008080;">LoadError</span></div>
<div id="file-gistfile1-rb-LC50" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">end</span></div>
<div id="file-gistfile1-rb-LC51" class="line" style="margin: 0px; padding: 0px;">&nbsp;</div>
<div id="file-gistfile1-rb-LC52" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">if</span> <span class="n" style="margin: 0px; padding: 0px;">defined?</span> <span class="no" style="margin: 0px; padding: 0px; color: #008080;">Hirb</span></div>
<div id="file-gistfile1-rb-LC53" class="line" style="margin: 0px; padding: 0px;"><span class="c1" style="margin: 0px; padding: 0px; color: #999988; font-style: italic;"># Dirty hack to support in-session Hirb.disable/enable</span></div>
<div id="file-gistfile1-rb-LC54" class="line" style="margin: 0px; padding: 0px;"><span class="ss" style="margin: 0px; padding: 0px; color: #990073;">Hirb</span><span class="p" style="margin: 0px; padding: 0px;">:</span><span class="ss" style="margin: 0px; padding: 0px; color: #990073;">:View</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">instance_eval</span> <span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">do</span></div>
<div id="file-gistfile1-rb-LC55" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">def</span> <span class="nf" style="margin: 0px; padding: 0px; font-weight: bold; color: #990000;">enable_output_method</span></div>
<div id="file-gistfile1-rb-LC56" class="line" style="margin: 0px; padding: 0px;"><span class="vi" style="margin: 0px; padding: 0px; color: #008080;">@output_method</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">=</span> <span class="kp" style="margin: 0px; padding: 0px; font-weight: bold;">true</span></div>
<div id="file-gistfile1-rb-LC57" class="line" style="margin: 0px; padding: 0px;"><span class="no" style="margin: 0px; padding: 0px; color: #008080;">Pry</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">config</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">print</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">=</span> <span class="nb" style="margin: 0px; padding: 0px; color: #0086b3;">proc</span> <span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">do</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">|</span><span class="n" style="margin: 0px; padding: 0px;">output</span><span class="p" style="margin: 0px; padding: 0px;">,</span> <span class="n" style="margin: 0px; padding: 0px;">value</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">|</span></div>
<div id="file-gistfile1-rb-LC58" class="line" style="margin: 0px; padding: 0px;"><span class="ss" style="margin: 0px; padding: 0px; color: #990073;">Hirb</span><span class="p" style="margin: 0px; padding: 0px;">:</span><span class="ss" style="margin: 0px; padding: 0px; color: #990073;">:View</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">view_or_page_output</span><span class="p" style="margin: 0px; padding: 0px;">(</span><span class="n" style="margin: 0px; padding: 0px;">value</span><span class="p" style="margin: 0px; padding: 0px;">)</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">||</span> <span class="ss" style="margin: 0px; padding: 0px; color: #990073;">Pry</span><span class="p" style="margin: 0px; padding: 0px;">:</span><span class="ss" style="margin: 0px; padding: 0px; color: #990073;">:DEFAULT_PRINT</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">call</span><span class="p" style="margin: 0px; padding: 0px;">(</span><span class="n" style="margin: 0px; padding: 0px;">output</span><span class="p" style="margin: 0px; padding: 0px;">,</span> <span class="n" style="margin: 0px; padding: 0px;">value</span><span class="p" style="margin: 0px; padding: 0px;">)</span></div>
<div id="file-gistfile1-rb-LC59" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">end</span></div>
<div id="file-gistfile1-rb-LC60" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">end</span></div>
<div id="file-gistfile1-rb-LC61" class="line" style="margin: 0px; padding: 0px;">&nbsp;</div>
<div id="file-gistfile1-rb-LC62" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">def</span> <span class="nf" style="margin: 0px; padding: 0px; font-weight: bold; color: #990000;">disable_output_method</span></div>
<div id="file-gistfile1-rb-LC63" class="line" style="margin: 0px; padding: 0px;"><span class="no" style="margin: 0px; padding: 0px; color: #008080;">Pry</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">config</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">print</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">=</span> <span class="nb" style="margin: 0px; padding: 0px; color: #0086b3;">proc</span> <span class="p" style="margin: 0px; padding: 0px;">{</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">|</span><span class="n" style="margin: 0px; padding: 0px;">output</span><span class="p" style="margin: 0px; padding: 0px;">,</span> <span class="n" style="margin: 0px; padding: 0px;">value</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">|</span> <span class="ss" style="margin: 0px; padding: 0px; color: #990073;">Pry</span><span class="p" style="margin: 0px; padding: 0px;">:</span><span class="ss" style="margin: 0px; padding: 0px; color: #990073;">:DEFAULT_PRINT</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">call</span><span class="p" style="margin: 0px; padding: 0px;">(</span><span class="n" style="margin: 0px; padding: 0px;">output</span><span class="p" style="margin: 0px; padding: 0px;">,</span> <span class="n" style="margin: 0px; padding: 0px;">value</span><span class="p" style="margin: 0px; padding: 0px;">)</span> <span class="p" style="margin: 0px; padding: 0px;">}</span></div>
<div id="file-gistfile1-rb-LC64" class="line" style="margin: 0px; padding: 0px;"><span class="vi" style="margin: 0px; padding: 0px; color: #008080;">@output_method</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">=</span> <span class="kp" style="margin: 0px; padding: 0px; font-weight: bold;">nil</span></div>
<div id="file-gistfile1-rb-LC65" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">end</span></div>
<div id="file-gistfile1-rb-LC66" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">end</span></div>
<div id="file-gistfile1-rb-LC67" class="line" style="margin: 0px; padding: 0px;">&nbsp;</div>
<div id="file-gistfile1-rb-LC68" class="line" style="margin: 0px; padding: 0px;"><span class="no" style="margin: 0px; padding: 0px; color: #008080;">Hirb</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">enable</span></div>
<div id="file-gistfile1-rb-LC69" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">end</span></div>
<div id="file-gistfile1-rb-LC70" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">end</span></div>
<div id="file-gistfile1-rb-LC71" class="line" style="margin: 0px; padding: 0px;">&nbsp;</div>
<div id="file-gistfile1-rb-LC72" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">begin</span></div>
<div id="file-gistfile1-rb-LC73" class="line" style="margin: 0px; padding: 0px;"><span class="nb" style="margin: 0px; padding: 0px; color: #0086b3;">require</span> <span class="s1" style="margin: 0px; padding: 0px; color: #dd1144;">&#8216;awesome_print&#8217;</span></div>
<div id="file-gistfile1-rb-LC74" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">rescue</span> <span class="no" style="margin: 0px; padding: 0px; color: #008080;">LoadError</span></div>
<div id="file-gistfile1-rb-LC75" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">end</span></div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[apt-get commands pausing at 'Waiting for headers']]></title>
    <link href="http://apiaceae.github.io/blog/2012/11/29/apt-get-commands-pausing-at-waiting-for-headers/"/>
    <updated>2012-11-29T00:00:00+08:00</updated>
    <id>http://apiaceae.github.io/blog/2012/11/29/apt-get-commands-pausing-at-waiting-for-headers</id>
    <content type="html"><![CDATA[<p style="margin: 0px 0px 1em; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; clear: both; word-wrap: break-word; font-family: Arial, 'Liberation Sans', 'DejaVu Sans', sans-serif; line-height: 18px;">Try commenting out your multiverse and universe repos in your&nbsp;<em style="margin: 0px; padding: 0px; border: 0px; vertical-align: baseline; background-color: transparent;">/etc/apt/sources.list</em></p>
<p style="margin: 0px 0px 1em; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; clear: both; word-wrap: break-word; font-family: Arial, 'Liberation Sans', 'DejaVu Sans', sans-serif; line-height: 18px;">Then do a:&nbsp;<strong style="margin: 0px; padding: 0px; border: 0px; vertical-align: baseline; background-color: transparent;">apt-get clean all</strong></p>
<p style="margin: 0px 0px 1em; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; clear: both; word-wrap: break-word; font-family: Arial, 'Liberation Sans', 'DejaVu Sans', sans-serif; line-height: 18px;">then finally an:&nbsp;<strong style="margin: 0px; padding: 0px; border: 0px; vertical-align: baseline; background-color: transparent;">apt-get update</strong></p>
<p style="margin: 0px 0px 1em; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; clear: both; word-wrap: break-word; font-family: Arial, 'Liberation Sans', 'DejaVu Sans', sans-serif; line-height: 18px;">See if that clears it up some.</p>
<p style="margin: 0px 0px 1em; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; clear: both; word-wrap: break-word; font-family: Arial, 'Liberation Sans', 'DejaVu Sans', sans-serif; line-height: 18px;">&nbsp;</p>
<p style="margin: 0px 0px 1em; padding: 0px; border: 0px; vertical-align: baseline; clear: both; word-wrap: break-word;">Make sure your time &amp; date is set correctly,</p>
<p style="margin: 0px 0px 1em; padding: 0px; border: 0px; vertical-align: baseline; clear: both; word-wrap: break-word;">I had the same problem and fixed it with a simple&nbsp;<code style="margin: 0px; padding: 1px 5px; border: 0px; vertical-align: baseline; background-color: #eeeeee; font-family: Consolas, Menlo, Monaco, 'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif;">ntpdate</code></p>
<p style="margin: 0px 0px 1em; padding: 0px; border: 0px; vertical-align: baseline; clear: both; word-wrap: break-word;">Also, find out what it&#8217;s doing by running&nbsp;<code style="margin: 0px; padding: 1px 5px; border: 0px; vertical-align: baseline; background-color: #eeeeee; font-family: Consolas, Menlo, Monaco, 'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif;">sudo strace apt-get update</code></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[解决git pull时出现的几个问题]]></title>
    <link href="http://apiaceae.github.io/blog/2012/11/28/%E8%A7%A3%E5%86%B3git-pull%E6%97%B6%E5%87%BA%E7%8E%B0%E7%9A%84%E5%87%A0%E4%B8%AA%E9%97%AE%E9%A2%98/"/>
    <updated>2012-11-28T00:00:00+08:00</updated>
    <id>http://apiaceae.github.io/blog/2012/11/28/解决git-pull时出现的几个问题</id>
    <content type="html"><![CDATA[<p>第1个问题: 解决GIT代码仓库不同步</p>
<p>今天在执行<a href="http://www.linuxso.com/command/git.html" target="_blank"><span style="text-decoration: underline;">git</span></a> pull时出现:</p>
<pre>&nbsp;</pre>
<ol class="dp-sql">
<li class="alt">
<pre><span><span>[root@linuxso.com&nbsp;/data/</span><span class="keyword">work</span><span>/www/rest/lib/Business/Inventory]#&nbsp;git&nbsp;pull &nbsp;</span></span></pre>
</li>
<li><span>Enter&nbsp;passphrase&nbsp;</span><span class="keyword">for</span><span>&nbsp;</span><span class="keyword">key</span><span>&nbsp;</span><span class="string">&#8216;/root/.ssh/<a href="http://www.linuxso.com/command/id.html" target="_blank"><span style="text-decoration: underline;">id</span></a>_rsa&#8217;</span><span>: &nbsp;</span></li>
<li class="alt"><span>Updating&nbsp;70e8b93..a0f1a6c &nbsp;</span></li>
<li><span style="background-color: #ff9900;">error:&nbsp;Your&nbsp;<span class="keyword">local</span>&nbsp;changes&nbsp;<span class="keyword">to</span>&nbsp;the&nbsp;following&nbsp;<a href="http://www.linuxso.com/command/file.html" target="_blank"><span style="text-decoration: underline;">file</span></a>s&nbsp;would&nbsp;be&nbsp;overwritten&nbsp;<span class="keyword">by</span>&nbsp;merge: &nbsp;</span></li>
<li class="alt"><span style="background-color: #ff9900;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rest/lib/Business/Inventory/Pro<a href="http://www.linuxso.com/command/du.html" target="_blank"><span style="text-decoration: underline;">du</span></a>ctStatus.php &nbsp;</span></li>
<li><span>Please,&nbsp;</span><span class="keyword">commit</span><span>&nbsp;your&nbsp;changes&nbsp;</span><span class="op">or</span><span>&nbsp;stash&nbsp;them&nbsp;before&nbsp;you&nbsp;can&nbsp;merge. &nbsp;</span></li>
<li class="alt"><span>Aborting&nbsp;</span></li>
</ol>
<p>解决方法: 执行git checkout -f，然后再执行git pull重新checkout</p>
<pre>&nbsp;</pre>
<ol class="dp-sql">
<li class="alt">
<pre><span><span>[root@linuxso.com&nbsp;/data/</span><span class="keyword">work</span><span>/www/rest/lib/Business/Inventory]#&nbsp;git&nbsp;checkout&nbsp;-f &nbsp;</span></span></pre>
</li>
<li><span>Your&nbsp;bra<a href="http://www.linuxso.com/command/nc.html" target="_blank"><span style="text-decoration: underline;">nc</span></a>h&nbsp;</span><span class="keyword">is</span><span>&nbsp;behind&nbsp;</span><span class="string">&#8216;origin/master&#8217;</span><span>&nbsp;</span><span class="keyword">by</span><span>&nbsp;2&nbsp;commits,&nbsp;</span><span class="op">and</span><span>&nbsp;can&nbsp;be&nbsp;fast-forwarded.&nbsp;</span></li>
</ol>
<p>再执行git pull时就可以了:</p>
<pre>&nbsp;</pre>
<ol class="dp-sql">
<li class="alt">
<pre><span><span>[root@linuxso.com&nbsp;/data/</span><span class="keyword">work</span><span>/www/rest/lib/Business/Inventory]#&nbsp;git&nbsp;pull &nbsp;</span></span></pre>
</li>
<li><span>Enter&nbsp;passphrase&nbsp;</span><span class="keyword">for</span><span>&nbsp;</span><span class="keyword">key</span><span>&nbsp;</span><span class="string">&#8216;/root/.ssh/id_rsa&#8217;</span><span>: &nbsp;</span></li>
<li class="alt"><span>Updating&nbsp;70e8b93..a0f1a6c &nbsp;</span></li>
<li><span>Fast-</span><span class="keyword">forward</span><span>&nbsp;</span></li>
<li class="alt"><span>&nbsp;rest/lib/Business/Inventory/ProductStatus.php&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;+ &nbsp;</span></li>
<li><span>&nbsp;1&nbsp;files&nbsp;changed,&nbsp;1&nbsp;insertions(+),&nbsp;0&nbsp;deletions(-) &nbsp;</span></li>
<li class="alt"><span>&nbsp;mode&nbsp;change&nbsp;100644&nbsp;=&gt;&nbsp;100755&nbsp;rest/lib/Business/Inventory/ProductStatus.php&nbsp;</span></li>
</ol>
<p>&nbsp;</p>
<p>第2个问题: git pull的默认地址问题.</p>
<p>1.git处于master这个branch下时，默认的remote就是origin； 2.当在master这个brach下使用指定remote和merge的git pull时，使用默认的remote和merge。 &nbsp; 但是对于自己建的项目，并用push到远程服务器上，并没有这块内容，需要自己配置。 如果直接运行git pull，会得到如此结果：</p>
<p>#当执行git pull之后的提示:</p>
<pre>&nbsp;</pre>
<ol class="dp-sql">
<li class="alt">
<pre><span><span>$&nbsp;git&nbsp;pull &nbsp;</span></span></pre>
</li>
<li><span class="keyword">Password</span><span>: &nbsp;</span></li>
<li class="alt"><span>You&nbsp;asked&nbsp;me&nbsp;</span><span class="keyword">to</span><span>&nbsp;pull&nbsp;without&nbsp;telling&nbsp;me&nbsp;<a href="http://www.linuxso.com/command/which.html" target="_blank"><span style="text-decoration: underline;">which</span></a>&nbsp;branch&nbsp;you &nbsp;</span></li>
<li><span>want&nbsp;</span><span class="keyword">to</span><span>&nbsp;merge&nbsp;</span><span class="keyword">with</span><span>,&nbsp;</span><span class="op">and</span><span>&nbsp;</span><span class="string">&#8216;branch.master.merge&#8217;</span><span>&nbsp;</span><span class="op">in</span><span>&nbsp;</span></li>
<li class="alt"><span>your&nbsp;configuration&nbsp;file&nbsp;does&nbsp;</span><span class="op">not</span><span>&nbsp;tell&nbsp;me,&nbsp;either.&nbsp;Please &nbsp;</span></li>
<li><span>specify&nbsp;which&nbsp;branch&nbsp;you&nbsp;want&nbsp;</span><span class="keyword">to</span><span>&nbsp;use&nbsp;</span><span class="keyword">on</span><span>&nbsp;the&nbsp;command&nbsp;line&nbsp;</span><span class="op">and</span><span>&nbsp;</span></li>
<li class="alt"><span><a href="http://www.linuxso.com/command/tr.html" target="_blank"><span style="text-decoration: underline;">tr</span></a>y&nbsp;again&nbsp;(e.g.&nbsp;</span><span class="string">&#8216;git&nbsp;pull&nbsp;&lt;repository&gt;&nbsp;&lt;refspec&gt;&#8217;</span><span>). &nbsp;</span></li>
<li><span>See&nbsp;git-pull(1)&nbsp;</span><span class="keyword">for</span><span>&nbsp;detai<a href="http://www.linuxso.com/command/ls.html" target="_blank"><span style="text-decoration: underline;">ls</span></a>. &nbsp;</span></li>
<li class="alt"><span>&nbsp; &nbsp;</span></li>
<li><span>If&nbsp;you&nbsp;often&nbsp;merge&nbsp;</span><span class="keyword">with</span><span>&nbsp;the&nbsp;same&nbsp;branch,&nbsp;you&nbsp;may&nbsp;want&nbsp;</span><span class="keyword">to</span><span>&nbsp;</span></li>
<li class="alt"><span>use&nbsp;something&nbsp;</span><span class="op">like</span><span>&nbsp;the&nbsp;following&nbsp;</span><span class="op">in</span><span>&nbsp;your&nbsp;configuration&nbsp;file: &nbsp;</span></li>
<li><span>&nbsp; &nbsp;</span></li>
<li class="alt"><span>[branch&nbsp;</span><span class="string">&#8220;master&#8221;</span><span>] &nbsp;</span></li>
<li><span>&nbsp;remote&nbsp;=&nbsp;&lt;nickname&gt; &nbsp;</span></li>
<li class="alt"><span>&nbsp;merge&nbsp;=&nbsp;&lt;remote-ref&gt; &nbsp;</span></li>
<li><span>&nbsp; &nbsp;</span></li>
<li class="alt"><span>[remote&nbsp;</span><span class="string">&#8220;&lt;nickname&gt;&#8221;</span><span>] &nbsp;</span></li>
<li><span>&nbsp;url&nbsp;=&nbsp;&lt;url&gt; &nbsp;</span></li>
<li class="alt"><span>&nbsp;</span><span class="keyword">fetch</span><span>&nbsp;=&nbsp;&lt;refspec&gt; &nbsp;</span></li>
<li><span>&nbsp; &nbsp;</span></li>
<li class="alt"><span>See&nbsp;git-config(1)&nbsp;</span><span class="keyword">for</span><span>&nbsp;details.&nbsp;</span></li>
</ol>
<p>#解决方法, 通过git config进行如下配置.</p>
<pre>&nbsp;</pre>
<ol class="dp-sql">
<li class="alt">
<pre><span><span>git&nbsp;remote&nbsp;</span><span class="keyword">a<a href="http://www.linuxso.com/command/dd.html" target="_blank"><span style="text-decoration: underline;">dd</span></a></span><span>&nbsp;-f&nbsp;origin&nbsp;git@192.168.21.44:rest.git &nbsp;</span></span></pre>
</li>
<li><span>git&nbsp;config&nbsp;branch.master.remote&nbsp;origin &nbsp;</span></li>
<li class="alt"><span>git&nbsp;config&nbsp;branch.master.merge&nbsp;refs/heads/master&nbsp;</span></li>
</ol>
<p>&nbsp;</p>
<!-- google_ad_section_end -->
<p><a href="http://www.linuxso.com/linuxrumen/13158.html">http://www.linuxso.com/linuxrumen/13158.html</a></p>
<p><br />&nbsp;</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Bupleurum Species, Scientific Evaluation and Clinical Applications]]></title>
    <link href="http://apiaceae.github.io/blog/2012/11/26/bupleurum-species-scientific-evaluation-and-clinical-applications/"/>
    <updated>2012-11-26T00:00:00+08:00</updated>
    <id>http://apiaceae.github.io/blog/2012/11/26/bupleurum-species-scientific-evaluation-and-clinical-applications</id>
    <content type="html"><![CDATA[<p><img src="http://apiaceae.github.io/images/2012/11/2012-11-26_180711.png" alt="" /></p>
<p>&nbsp;</p>
<p>好书！研究植物就应该这样应用才有价值。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Vim格式化代码]]></title>
    <link href="http://apiaceae.github.io/blog/2012/10/23/vim%E6%A0%BC%E5%BC%8F%E5%8C%96%E4%BB%A3%E7%A0%81/"/>
    <updated>2012-10-23T00:00:00+08:00</updated>
    <id>http://apiaceae.github.io/blog/2012/10/23/vim格式化代码</id>
    <content type="html"><![CDATA[<p>(1) 按两下小写g，即gg，定位光标到第一行。</p>
<p>(2) 按住Shift+v，即大写V，进入可视化编辑的列编辑模式。</p>
<p>(3) Shift+g，即大写G，选中整个代码。</p>
<p>(4) 按下等号=，格式化所有代码。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[如何更新Dell服务器的Bios及Locale问题]]></title>
    <link href="http://apiaceae.github.io/blog/2012/10/22/%E5%A6%82%E4%BD%95%E6%9B%B4%E6%96%B0dell%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84bios/"/>
    <updated>2012-10-22T00:00:00+08:00</updated>
    <id>http://apiaceae.github.io/blog/2012/10/22/如何更新dell服务器的bios</id>
    <content type="html"><![CDATA[<p><span style="font-family: sans-serif; font-size: 13px; line-height: 19px;"><span style="font-family: sans-serif; font-size: 13px; line-height: 19px;"></span></span></p>
<ul>
<li>Install libsmbios</li>
</ul>
<p><span style="font-family: sans-serif; font-size: 13px; line-height: 19px;"><span style="font-family: sans-serif; font-size: 13px; line-height: 19px;"></span></span></p>
<pre># apt-get update    (not always necessary)
# apt-get install libsmbios-bin
</pre>
<p><span style="font-family: sans-serif; font-size: 13px; line-height: 19px;"><span style="font-family: sans-serif; font-size: 13px; line-height: 19px;"></span></span></p>
<ul>
<li>Get the System ID</li>
</ul>
<p><span style="font-family: sans-serif; font-size: 13px; line-height: 19px;"><span style="font-family: sans-serif; font-size: 13px; line-height: 19px;"></span></span></p>
<pre># getSystemId 
Libsmbios:    0.12.1
<strong>System ID: 0x01DD</strong>
Service Tag:  DT6WLB1
Express Service Code: 30063287773
Product Name: Dell DM061
BIOS Version: 2.3.2
Vendor:       Dell Inc.
Is Dell:      1
</pre>
<p><span style="font-family: sans-serif; font-size: 13px; line-height: 19px;"><span style="font-family: sans-serif; font-size: 13px; line-height: 19px;"></span></span></p>
<ul>
<li>Download the latest BIOS &#8220;.HDR&#8221; file for this system. Go here: <a class="external free" href="http://linux.dell.com/repo/firmware/bios-hdrs/" rel="nofollow">http://linux.dell.com/repo/firmware/bios-hdrs/</a>. Scroll down the list to find a directory matching the System ID from the previous step. The directory will be named: system_bios_ven_0x1028_dev_<strong>SYSTEM_ID</strong>_version_<strong>BIOS_VERSION</strong>. Go into this directory and download the file, &#8220;bios.hdr&#8221;.</li>
</ul>
<p><span style="font-family: sans-serif; font-size: 13px; line-height: 19px;"><span style="font-family: sans-serif; font-size: 13px; line-height: 19px;"></span></span></p>
<ul>
<li>load the <strong>dell_rbu</strong> driver</li>
</ul>
<p><span style="font-family: sans-serif; font-size: 13px; line-height: 19px;"><span style="font-family: sans-serif; font-size: 13px; line-height: 19px;"></span></span></p>
<pre># modprobe dell_rbu
</pre>
<p><span style="font-family: sans-serif; font-size: 13px; line-height: 19px;"><span style="font-family: sans-serif; font-size: 13px; line-height: 19px;"></span></span></p>
<ul>
<li>update the bios</li>
</ul>
<p><span style="font-family: sans-serif; font-size: 13px; line-height: 19px;"><span style="font-family: sans-serif; font-size: 13px; line-height: 19px;"></span></span></p>
<pre># dellBiosUpdate -u -f ./bios.hdr-2.3.2 
Supported RBU type for this system: (MONOLITHIC)
Using RBU v2 driver. Initializing Driver. 
Setting RBU type in v2 driver to: MONOLITHIC
Prep driver for data load.
Writing RBU data (4096bytes/dot): ............................
..............................................................
.......................
Notify driver data is finished.
Activate CMOS bit to notify BIOS that update is ready on next boot.
Update staged sucessfully. BIOS update will occur on next reboot.
</pre>
<p><span style="font-family: sans-serif; font-size: 13px; line-height: 19px;"><span style="font-family: sans-serif; font-size: 13px; line-height: 19px;"></span></span></p>
<ul>
<li>reboot the system</li>
</ul>
<p><span style="font-family: sans-serif; font-size: 13px; line-height: 19px;"><span style="font-family: sans-serif; font-size: 13px; line-height: 19px;"></span></span></p>
<pre># reboot
</pre>
<p><a href="http://linux.dell.com/wiki/index.php/Tech/libsmbios_dellBiosUpdate">http://linux.dell.com/wiki/index.php/Tech/libsmbios_dellBiosUpdate</a></p>
<p><span style="font-family: sans-serif; font-size: 13px; line-height: 19px;"></span>&nbsp;</p>
<h2 class="title content-title">典型错误：locale.Error：unsupported locale setting</h2>
<div id="content" class="content mod-cs-content text-content clearfix"><strong>&nbsp;locale.Error：unsupported locale setting<br /><br /><br /><br /></strong><strong>1、错误提出</strong><br />（1）locale指令运行出现的错误信息<br />locale：Cannot set LC_CTYPE to default locale： No such file or directory<br />locale：Cannot set LC_MESSAGES to default locale： No such file or directory<br />locale：Cannot set LC_ALL to default locale： No such file or directory<br />（2）setup指令运行出现的错误信息<br />locale.Error：unsupported locale setting，导致无法设置&ldquo;network configuration&#8221;<br />（3）yum指令运行出现的错误信息<br />Failed to set locale, defaulting to C<br /><img src="http://hiphotos.baidu.com/9812658/pic/item/03ca8c7109101d2c8601b07b.jpg" alt="" /><br /><img src="http://hiphotos.baidu.com/9812658/pic/item/61139699c5fff585c8eaf47b.jpg" alt="" /><br /><img src="http://hiphotos.baidu.com/9812658/pic/item/982718a3fbd4dcbb4610647b.jpg" alt="" /><br /><br /><br /><strong>2、分析原因</strong><br />locale是用来设置软件运行的语言环境，所以语言环境设置有问题<br /><br /><strong>3、解决故障<br /></strong>重新设置语言环境，最简单的解决办法，例如：<br />[root@Mylinux ~]#&nbsp; echo &#8220;export&nbsp; LC_ALL=en_US.UTF-8&#8221;&nbsp; &gt;&gt;&nbsp;&nbsp; /home/XXX/.bash_profile（特定用户）<br />或者<br />[root@Mylinux ~]#&nbsp; echo &#8220;export LC_ALL=en_US.UTF-8&#8221;&nbsp; &gt;&gt;&nbsp; /etc/profile（所有用户）<br />[root@Mylinux ~]#&nbsp; exit<br />然后重新登录，使用locale指令查看变量<br /><img src="http://hiphotos.baidu.com/9812658/pic/item/58f80bee1050cc1762d09ffa.jpg" alt="" /><br /><br />=================关于locale的设置，请查阅文章：《<span style="text-decoration: underline;"><strong><a href="http://hi.baidu.com/9812658/blog/item/d0021e33c0b32aa35fdf0e6c.html" target="_blank">Linux系统locale的设置</a></strong></span>》=================</div>
<p><a href="http://hi.baidu.com/linuxtrip/item/02b8c7774d7a70215d17893d">http://hi.baidu.com/linuxtrip/item/02b8c7774d7a70215d17893d</a></p>
<p>&nbsp;</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Ubuntu为drupal7配置Apache Solr详细步骤]]></title>
    <link href="http://apiaceae.github.io/blog/2012/07/18/ubuntu%E4%B8%BAdrupal7%E9%85%8D%E7%BD%AEapache-solr%E8%AF%A6%E7%BB%86%E6%AD%A5%E9%AA%A4/"/>
    <updated>2012-07-18T00:00:00+08:00</updated>
    <id>http://apiaceae.github.io/blog/2012/07/18/ubuntu为drupal7配置apache-solr详细步骤</id>
    <content type="html"><![CDATA[<h1>下面为详细安装步骤，一步步来就能配出如图所示的搜索效果:</h1>
<p>1). 安装Java SDK</p>
<p><code>yum install java-1.6*</code></p>
<p>2).下载最新版本的Solr，当前最新版本是1.4.1 , 经过测试，在国内用bjtu.edu.cn地址下载速度比较快，下载下</p>
<p>来后，放到非web目录的文件夹下面，我放在了/home/ruby 目录下面，并重命名为solr</p>
<div class="codeblock"><code>cd /home/ruby<br /><br />wget <a title="http://mirror.bjtu.edu.cn/apache/lucene/solr/1.4.1/apache-solr-1.4.1.tgz" href="http://mirror.bjtu.edu.cn/apache/lucene/solr/1.4.1/apache-solr-1.4.1.tgz" target="_blank">http://mirror.bjtu.edu.cn/apache/lucene/solr/1.4.1/apache-solr-1.4.1.tgz</a> <br /><br />tar xvfz apache-solr-1.4.1.tgz<br /><br />mv apache-solr-1.4.1 solr</code></div>
<p>3).下载Drupal的Apache Solr(<a title="http://drupal.org/project/ApacheSolr" href="http://drupal.org/project/ApacheSolr" target="_blank">http://drupal.org/project/ApacheSolr</a>)模块, 如果你有drush,用drush会方便的</p>
<p>多,如果没有drush,就按常规方便，下载解压缩，放到sites/all/modules目录。并下载php的solr库（</p>
<p>http://code.google.com/p/solr-php-client/），放到sites/all/modules/apachesolr根目录,最终结构</p>
<p>为:/sites/all/modules/apachesolr/SolrPhpClient。</p>
<div class="codeblock"><code>cd /var/www/html/yourdrupal_root<br />drush dl apachesolr<br />cd sites/all/modules/apachesolr<br />wget <a title="http://solr-php-client.googlecode.com/files/SolrPhpClient.r22.2009-11-09.zip" href="http://solr-php-client.googlecode.com/files/SolrPhpClient.r22.2009-11-09.zip" target="_blank">http://solr-php-client.googlecode.com/files/SolrPhpClient.r22.2009-11-09...</a> <br />unzip SolrPhpClient.r22.2009-11-09.zip </code></div>
<p>4).根据apachesolr模块里面的说明，复制apachesolr模块里面的schema.xml，solrconfig.xml</p>
<p>到/home/ruby/solr/example/solr目录.</p>
<div class="codeblock"><code>cp /var/www/html/yourdrupal_root/sites/all/modules/apachesolr/schema.xml /home/ruby/solr/example/solr/conf<br />cp /var/www/html/yourdrupal_root/sites/all/modules/apachesolr/solrconfig.xml /home/ruby/solr/example/solr/conf</code></div>
<p>5).测试一下Apache Solr是否工作了？</p>
<div class="codeblock"><code>cd /home/ruby/solr/example<br />java -jar start.jar</code></div>
<p><br />在浏览器中输入http://192.168.1.110:8983/solr/admin/ （192.168.1.110换成你自已的地址）,如果你顺利看到</p>
<p>如下界面，说明你就成功了！</p>
<p><img src="http://drupalsh.cn/userfiles/solr.png" alt="" /></p>
<p>6).按照常规模式启用drupal的Apache Solr模块,OK,到后台配制一下(admin/settings/apachesolr)，测试是否成</p>
<p>功,如果不出意外，你就会看到本文开头的图片效果.</p>
<p>续&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;<br /> 你肯定不想每次都在命令行窗口打开solr服务，好，让我们把solr变成系统服务</p>
<p>7).创建系统启动服务功能</p>
<div class="codeblock"><code>nano -w /etc/init.d/solr</code></div>
<p>复制以下代码:</p>
<div class="codeblock"><code>SOLR_DIR="/home/ruby/solr/example"&nbsp; # 换成你的安装路径<br />JAVA_OPTIONS="-Xmx1024m -DSTOP.PORT=8079 -DSTOP.KEY=stopkey -jar start.jar"<br />LOG_FILE="/var/log/solr.log"<br />JAVA="/usr/bin/java"<br /> <br />case $1 in<br />&nbsp;&nbsp;&nbsp; start)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "Starting Solr"<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cd $SOLR_DIR<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $JAVA $JAVA_OPTIONS 2&gt; $LOG_FILE &amp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;;<br />&nbsp;&nbsp;&nbsp; stop)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "Stopping Solr"<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cd $SOLR_DIR<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $JAVA $JAVA_OPTIONS --stop<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;;<br />&nbsp;&nbsp;&nbsp; restart)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $0 stop<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sleep 1<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $0 start<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;;<br />&nbsp;&nbsp;&nbsp; *)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "Usage: $0 {start|stop|restart}" &gt;&amp;2<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; exit 1<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;;<br />esac</code></div>
<p>保存退出,授权</p>
<div class="codeblock"><code>chmod 755 /etc/init.d/solr</code></div>
<p>现在，你可以用以下linux常用命令去启动apache solr了</p>
<div class="codeblock"><code>service solr start<br />service solr stop<br />service solr restart</code></div>
<p>如果需要，还可以加上开机自动开启apache solr</p>
<div class="codeblock"><code>sudo chkconfig --add solr</code></div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ ubuntu解压命令全览 ]]></title>
    <link href="http://apiaceae.github.io/blog/2012/07/17/ubuntu%E8%A7%A3%E5%8E%8B%E5%91%BD%E4%BB%A4%E5%85%A8%E8%A7%88/"/>
    <updated>2012-07-17T00:00:00+08:00</updated>
    <id>http://apiaceae.github.io/blog/2012/07/17/ubuntu解压命令全览</id>
    <content type="html"><![CDATA[<p><strong><span style="font-size: x-small;"><span style="color: #0000ff;">.tar</span></span></strong><br /> 解包：tar xvf FileName.tar<br /> 打包：tar cvf FileName.tar DirName<br /> <span style="color: #008000;">（注：tar是打包，不是压缩！）</span><br /> &#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;<br /> <strong><span style="font-size: x-small;"><span style="color: #0000ff;">.gz</span></span></strong><br /> 解压1：gunzip FileName.gz<br /> 解压2：gzip -d FileName.gz<br /> 压缩：gzip FileName<br /> <strong><span style="font-size: x-small;"><span style="color: #0000ff;">.tar.gz 和 .tgz</span></span></strong><br /> 解压：tar zxvf FileName.tar.gz<br /> 压缩：tar zcvf FileName.tar.gz DirName<br /> &#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;<br /> <strong><span style="font-size: x-small;"><span style="color: #0000ff;">.bz2</span></span></strong><br /> 解压1：bzip2 -d FileName.bz2<br /> 解压2：bunzip2 FileName.bz2<br /> 压缩： bzip2 -z FileName<br /> <strong><span style="font-size: x-small;"><span style="color: #0000ff;">.tar.bz2</span></span></strong><br /> 解压：tar jxvf FileName.tar.bz2<br /> 压缩：tar jcvf FileName.tar.bz2 DirName<br /> &#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;<br /> <strong><span style="font-size: x-small;"><span style="color: #0000ff;">.bz</span></span></strong><br /> 解压1：bzip2 -d FileName.bz<br /> 解压2：bunzip2 FileName.bz<br /> 压缩：<span style="color: #ffa500;">未知</span><br /> <strong><span style="font-size: x-small;"><span style="color: #0000ff;">.tar.bz</span></span></strong><br /> 解压：tar jxvf FileName.tar.bz<br /> 压缩：<span style="color: #ffa500;">未知</span><br /> &#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;<br /> <strong><span style="font-size: x-small;"><span style="color: #0000ff;">.Z</span></span></strong><br /> 解压：uncompress FileName.Z<br /> 压缩：compress FileName<br /> <strong><span style="font-size: x-small;"><span style="color: #0000ff;">.tar.Z</span></span></strong><br /> 解压：tar Zxvf FileName.tar.Z<br /> 压缩：tar Zcvf FileName.tar.Z DirName<br /> &#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;<br /> <strong><span style="font-size: x-small;"><span style="color: #0000ff;">.zip</span></span></strong><br /> 解压：unzip FileName.zip<br /> 压缩：zip FileName.zip DirName<br /> &#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;<br /> <strong><span style="font-size: x-small;"><span style="color: #0000ff;">.rar</span></span></strong><br /> 解压：rar x FileName.rar<br /> 压缩：rar a FileName.rar DirName<br /> <span style="color: #008000;"><br /> rar请到：<a style="color: #003793;" href="http://www.rarsoft.com/download.htm" target="_blank"><span style="color: #003793;">http://www.rarsoft.com/download.htm</span></a> 下载！<br /> 解压后请将rar_static拷贝到/usr/bin目录（其他由$PATH环境变量指定的目录也可以）：<br /> [root@www2 tmp]# cp rar_static /usr/bin/rar</span><br /> &#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;<br /> <strong><span style="font-size: x-small;"><span style="color: #0000ff;">.lha</span></span></strong><br /> 解压：lha -e FileName.lha<br /> 压缩：lha -a FileName.lha FileName<br /> <span style="color: #008000;"><br /> lha请到：<a style="color: #003793;" href="http://www.infor.kanazawa-it.ac.jp/%7Eishii/lhaunix/" target="_blank"><span style="color: #003793;">http://www.infor.kanazawa-it.ac.jp/~ishii/lhaunix/</span></a>下载！<br /> &gt;解压后请将lha拷贝到/usr/bin目录（其他由$PATH环境变量指定的目录也可以）：<br /> [root@www2 tmp]# cp lha /usr/bin/</span><br /> &#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;<br /> <strong><span style="font-size: x-small;"><span style="color: #0000ff;">.rpm</span></span></strong><br /> 解包：rpm2cpio FileName.rpm | cpio -div<br /> &#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;<br /> <strong><span style="font-size: x-small;"><span style="color: #0000ff;">.deb</span></span></strong><br /> 解包：ar p FileName.deb data.tar.gz | tar zxf -<br /> &#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;<br /> <strong><span style="font-size: x-small;"><span style="color: #0000ff;">.tar .tgz .tar.gz .tar.Z .tar.bz .tar.bz2 .zip .cpio .rpm .deb .slp .arj .rar .ace .lha .lzh .lzx .lzs .arc .sda .sfx .lnx .zoo .cab .kar .cpt .pit .sit .sea</span></span></strong><br /> 解压：sEx x FileName.*<br /> 压缩：sEx a FileName.* FileName</p>
<p>文章转自：http://blog.csdn.net/zad522/article/details/2770446</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ubuntu12.04配置静态IP及设置DNS]]></title>
    <link href="http://apiaceae.github.io/blog/2012/07/17/ubuntu1204%E9%85%8D%E7%BD%AE%E9%9D%99%E6%80%81ip%E5%8F%8A%E8%AE%BE%E7%BD%AEdns/"/>
    <updated>2012-07-17T00:00:00+08:00</updated>
    <id>http://apiaceae.github.io/blog/2012/07/17/ubuntu1204配置静态ip及设置dns</id>
    <content type="html"><![CDATA[<div class="content">
<h1>静态IP配置方法：</h1>
<div>编辑/etc/network/interfaces，删掉内容，并输入以下几行（假设你的网卡是eth0）</div>
<div>sudo gedit /etc/network/interfaces</div>
<div>auto eth0</div>
<div>iface eth0 inet static &nbsp; //指定为static</div>
<div>address 192.168.1.103 &nbsp; //IP地址</div>
<div>gateway 192.168.1.1 &nbsp; //网关</div>
<div>netmask 255.255.255.0 &nbsp; //子网掩码</div>
<div>network 192.168.1.0 &nbsp; //这个是网络？</div>
<div>broadcast 192.168.1.255 &nbsp; //广播</div>
<div>然后重启网络设备</div>
<div>sudo /etc/init.d/networking restart</div>
<div>&nbsp;</div>
<div>设置DNS：</div>
<div>Ubuntu设置DNS，只要将DNS地址写入/ect/resolv.conf文件即可，但在12.04 desktop版中，重启系统之后，静态IP设置生效，但无法链接外网，/etc/resole.conf文件的DNS地址也覆盖掉了。</div>
<div>解决办法，在/etc/resol<a href="http://biancheng.dnbcw.info/vc/">vc</a>onf/resolv.conf.d/目录下创建tail文件，写入</div>
<div>nameserver 202.96.134.133</div>
<div>nameserver 202.96.128.68</div>
<div>然后重启，DNS生效。</div>
<div>&nbsp;</div>
<div>参考链接：http://ask<a href="http://biancheng.dnbcw.info/ubuntu/">ubuntu</a>.com/questions/130452/how-do-i-add-a-dns-server-via-resolv-conf</div>
</div>
<div>&nbsp;</div>
<h1>Ubuntu12.04的一些源列表</h1>
<p>&nbsp;</p>
<p>&nbsp;</p>
<div class="article_manage"><span class="link_report"><br class="link_categories" /></span></div>
<p>&nbsp;</p>
<div id="article_content" class="article_content">
<p style="margin-top: 0px; margin-bottom: 14px; padding-top: 0px; padding-bottom: 0px; color: #333333; font-family: arial,宋体,sans-serif; font-size: 14px; line-height: 21px;">安装好ubuntu 12.04之后，可以联网之后，马上要做的最重要的事情之一就是配置更新源列表，这样以后安装更新或者软件才可以获得较好的下载速度。<br /> 首先，备份一下原来的源地址列表文件<br /> sudo cp /etc/apt/sources.list /etc/apt/sources.list.old<br /> 然后进行修改<br /> sudo gedit /etc/apt/sources.list<br /> 可以在里面添加资源地址，我是直接覆盖掉原来的。<br /> 添加好后保存，再输入 sudo apt-get update 就可以更新了，等着慢慢下载东西吧。我虽然选了一个网易的和一个中科大的源，无奈那天网速不给力，还是花了差不多两个小时。<br /> 下面是网上找到的一些较好的源，有大型网站的，也有教育网的，可以根据自己的情况添加两三个即可。<br /> #网易的源（速度很快）<br /> deb http://mirrors.163.com/ubuntu/ precise main universe restricted multiverse<br /> deb-src http://mirrors.163.com/ubuntu/ precise main universe restricted multiverse<br /> deb http://mirrors.163.com/ubuntu/ precise-security universe main multiverse restricted<br /> deb-src http://mirrors.163.com/ubuntu/ precise-security universe main multiverse restricted<br /> deb http://mirrors.163.com/ubuntu/ precise-updates universe main multiverse restricted<br /> deb http://mirrors.163.com/ubuntu/ precise-proposed universe main multiverse restricted<br /> deb-src http://mirrors.163.com/ubuntu/ precise-proposed universe main multiverse restricted<br /> deb http://mirrors.163.com/ubuntu/ precise-backports universe main multiverse restricted<br /> deb-src http://mirrors.163.com/ubuntu/ precise-backports universe main multiverse restricted<br /> deb-src http://mirrors.163.com/ubuntu/ precise-updates universe main multiverse restricted<br /> #搜狐的源<br /> deb http://mirrors.sohu.com/ubuntu/ precise main restricted<br /> deb-src http://mirrors.sohu.com/ubuntu/ precise main restricted<br /> deb http://mirrors.sohu.com/ubuntu/ precise-updates main restricted<br /> deb-src http://mirrors.sohu.com/ubuntu/ precise-updates main restricted<br /> deb http://mirrors.sohu.com/ubuntu/ precise universe<br /> deb-src http://mirrors.sohu.com/ubuntu/ precise universe<br /> deb http://mirrors.sohu.com/ubuntu/ precise-updates universe<br /> deb-src http://mirrors.sohu.com/ubuntu/ precise-updates universe<br /> deb http://mirrors.sohu.com/ubuntu/ precise multiverse<br /> deb-src http://mirrors.sohu.com/ubuntu/ precise multiverse<br /> deb http://mirrors.sohu.com/ubuntu/ precise-updates multiverse<br /> deb-src http://mirrors.sohu.com/ubuntu/ precise-updates multiverse<br /> deb http://mirrors.sohu.com/ubuntu/ precise-backports main restricted universe multiverse<br /> deb-src http://mirrors.sohu.com/ubuntu/ precise-backports main restricted universe multiverse<br /> deb http://mirrors.sohu.com/ubuntu/ precise-security main restricted<br /> deb-src http://mirrors.sohu.com/ubuntu/ precise-security main restricted<br /> deb http://mirrors.sohu.com/ubuntu/ precise-security universe<br /> deb-src http://mirrors.sohu.com/ubuntu/ precise-security universe<br /> deb http://mirrors.sohu.com/ubuntu/ precise-security multiverse<br /> deb-src http://mirrors.sohu.com/ubuntu/ precise-security multiverse<br /> deb http://extras.ubuntu.com/ubuntu precise main<br /> deb-src http://extras.ubuntu.com/ubuntu precise main<br /> #台湾源<br /> deb http://tw.archive.ubuntu.com/ubuntu/ precise main universe restricted multiverse<br /> deb-src http://tw.archive.ubuntu.com/ubuntu/ precise main universe restricted multiverse<br /> deb http://tw.archive.ubuntu.com/ubuntu/ precise-security universe main multiverse restricted<br /> deb-src http://tw.archive.ubuntu.com/ubuntu/ precise-security universe main multiverse restricted<br /> deb http://tw.archive.ubuntu.com/ubuntu/ precise-updates universe main multiverse restricted<br /> deb-src http://tw.archive.ubuntu.com/ubuntu/ precise-updates universe main multiverse restricted</p>
<p style="margin-top: 0px; margin-bottom: 14px; padding-top: 0px; padding-bottom: 0px; color: #333333; font-family: arial,宋体,sans-serif; font-size: 14px; line-height: 21px;">#骨头源，骨头源是bones7456架设的一个Ubuntu源 ，提供ubuntu,deepin<br /> deb http://ubuntu.srt.cn/ubuntu/ precise main universe restricted multiverse<br /> deb-src http://ubuntu.srt.cn/ubuntu/ precise main universe restricted multiverse<br /> deb http://ubuntu.srt.cn/ubuntu/ precise-security universe main multiverse restricted<br /> deb-src http://ubuntu.srt.cn/ubuntu/ precise-security universe main multiverse restricted<br /> deb http://ubuntu.srt.cn/ubuntu/ precise-updates universe main multiverse restricted<br /> deb http://ubuntu.srt.cn/ubuntu/ precise-proposed universe main multiverse restricted<br /> deb-src http://ubuntu.srt.cn/ubuntu/ precise-proposed universe main multiverse restricted<br /> deb http://ubuntu.srt.cn/ubuntu/ precise-backports universe main multiverse restricted<br /> deb-src http://ubuntu.srt.cn/ubuntu/ precise-backports universe main multiverse restricted<br /> deb-src http://ubuntu.srt.cn/ubuntu/ precise-updates universe main multiverse restricted</p>
<p style="margin-top: 0px; margin-bottom: 14px; padding-top: 0px; padding-bottom: 0px; color: #333333; font-family: arial,宋体,sans-serif; font-size: 14px; line-height: 21px;">#mirror.lupaworld.com的源，速度很快<br /> deb http://mirror.lupaworld.com/ubuntu/archive/ precise main restricted universe multiverse<br /> deb http://mirror.lupaworld.com/ubuntu/archive/ precise-security main restricted universe multiverse<br /> deb http://mirror.lupaworld.com/ubuntu/archive/ precise-updates main restricted universe multiverse<br /> deb http://mirror.lupaworld.com/ubuntu/archive/ precise-backports main restricted universe multiverse<br /> deb http://mirror.lupaworld.com/ubuntu/ubuntu-cn/ precise main restricted universe multiverse</p>
<p style="margin-top: 0px; margin-bottom: 14px; padding-top: 0px; padding-bottom: 0px; color: #333333; font-family: arial,宋体,sans-serif; font-size: 14px; line-height: 21px;">#ubuntu.cn99.com源（推荐）:<br /> deb http://ubuntu.cn99.com/ubuntu/ precise main restricted universe multiverse<br /> deb http://ubuntu.cn99.com/ubuntu/ precise-updates main restricted universe multiverse<br /> deb http://ubuntu.cn99.com/ubuntu/ precise-security main restricted universe multiverse<br /> deb http://ubuntu.cn99.com/ubuntu/ precise-backports main restricted universe multiverse<br /> deb http://ubuntu.cn99.com/ubuntu-cn/ precise main restricted universe multiverse</p>
<p style="margin-top: 0px; margin-bottom: 14px; padding-top: 0px; padding-bottom: 0px; color: #333333; font-family: arial,宋体,sans-serif; font-size: 14px; line-height: 21px;">#教育网源<br /> #电子科技大学<br /> deb http://ubuntu.uestc.edu.cn/ubuntu/ precise main restricted universe multiverse<br /> deb http://ubuntu.uestc.edu.cn/ubuntu/ precise-backports main restricted universe multiverse<br /> deb http://ubuntu.uestc.edu.cn/ubuntu/ precise-proposed main restricted universe multiverse<br /> deb http://ubuntu.uestc.edu.cn/ubuntu/ precise-security main restricted universe multiverse<br /> deb http://ubuntu.uestc.edu.cn/ubuntu/ precise-updates main restricted universe multiverse<br /> deb-src http://ubuntu.uestc.edu.cn/ubuntu/ precise main restricted universe multiverse<br /> deb-src http://ubuntu.uestc.edu.cn/ubuntu/ precise-backports main restricted universe multiverse<br /> deb-src http://ubuntu.uestc.edu.cn/ubuntu/ precise-proposed main restricted universe multiverse<br /> deb-src http://ubuntu.uestc.edu.cn/ubuntu/ precise-security main restricted universe multiverse<br /> deb-src http://ubuntu.uestc.edu.cn/ubuntu/ precise-updates main restricted universe multiverse</p>
<p style="margin-top: 0px; margin-bottom: 14px; padding-top: 0px; padding-bottom: 0px; color: #333333; font-family: arial,宋体,sans-serif; font-size: 14px; line-height: 21px;">#中国科技大学<br /> deb http://debian.ustc.edu.cn/ubuntu/ precise main restricted universe multiverse<br /> deb http://debian.ustc.edu.cn/ubuntu/ precise-backports restricted universe multiverse<br /> deb http://debian.ustc.edu.cn/ubuntu/ precise-proposed main restricted universe multiverse<br /> deb http://debian.ustc.edu.cn/ubuntu/ precise-security main restricted universe multiverse<br /> deb http://debian.ustc.edu.cn/ubuntu/ precise-updates main restricted universe multiverse<br /> deb-src http://debian.ustc.edu.cn/ubuntu/ precise main restricted universe multiverse<br /> deb-src http://debian.ustc.edu.cn/ubuntu/ precise-backports main restricted universe multiverse<br /> deb-src http://debian.ustc.edu.cn/ubuntu/ precise-proposed main restricted universe multiverse<br /> deb-src http://debian.ustc.edu.cn/ubuntu/ precise-security main restricted universe multiverse<br /> deb-src http://debian.ustc.edu.cn/ubuntu/ precise-updates main restricted universe multiverse</p>
<p style="margin-top: 0px; margin-bottom: 14px; padding-top: 0px; padding-bottom: 0px; color: #333333; font-family: arial,宋体,sans-serif; font-size: 14px; line-height: 21px;">#北京理工大学<br /> deb http://mirror.bjtu.edu.cn/ubuntu/ precise main multiverse restricted universe<br /> deb http://mirror.bjtu.edu.cn/ubuntu/ precise-backports main multiverse restricted universe<br /> deb http://mirror.bjtu.edu.cn/ubuntu/ precise-proposed main multiverse restricted universe<br /> deb http://mirror.bjtu.edu.cn/ubuntu/ precise-security main multiverse restricted universe<br /> deb http://mirror.bjtu.edu.cn/ubuntu/ precise-updates main multiverse restricted universe<br /> deb-src http://mirror.bjtu.edu.cn/ubuntu/ precise main multiverse restricted universe<br /> deb-src http://mirror.bjtu.edu.cn/ubuntu/ precise-backports main multiverse restricted universe<br /> deb-src http://mirror.bjtu.edu.cn/ubuntu/ precise-proposed main multiverse restricted universe<br /> deb-src http://mirror.bjtu.edu.cn/ubuntu/ precise-security main multiverse restricted universe<br /> deb-src http://mirror.bjtu.edu.cn/ubuntu/ precise-updates main multiverse restricted universe</p>
<p style="margin-top: 0px; margin-bottom: 14px; padding-top: 0px; padding-bottom: 0px; color: #333333; font-family: arial,宋体,sans-serif; font-size: 14px; line-height: 21px;">#兰州大学<br /> deb ftp://mirror.lzu.edu.cn/ubuntu/ precise main multiverse restricted universe<br /> deb ftp://mirror.lzu.edu.cn/ubuntu/ precise-backports main multiverse restricted universe<br /> deb ftp://mirror.lzu.edu.cn/ubuntu/ precise-proposed main multiverse restricted universe<br /> deb ftp://mirror.lzu.edu.cn/ubuntu/ precise-security main multiverse restricted universe<br /> deb ftp://mirror.lzu.edu.cn/ubuntu/ precise-updates main multiverse restricted universe<br /> deb ftp://mirror.lzu.edu.cn/ubuntu-cn/ precise main multiverse restricted universe</p>
<p style="margin-top: 0px; margin-bottom: 14px; padding-top: 0px; padding-bottom: 0px; color: #333333; font-family: arial,宋体,sans-serif; font-size: 14px; line-height: 21px;">#上海交通大学<br /> deb http://ftp.sjtu.edu.cn/ubuntu/ precise main multiverse restricted universe<br /> deb http://ftp.sjtu.edu.cn/ubuntu/ precise-backports main multiverse restricted universe<br /> deb http://ftp.sjtu.edu.cn/ubuntu/ precise-proposed main multiverse restricted universe<br /> deb http://ftp.sjtu.edu.cn/ubuntu/ precise-security main multiverse restricted universe<br /> deb http://ftp.sjtu.edu.cn/ubuntu/ precise-updates main multiverse restricted universe<br /> deb http://ftp.sjtu.edu.cn/ubuntu-cn/ precise main multiverse restricted universe<br /> deb-src http://ftp.sjtu.edu.cn/ubuntu/ precise main multiverse restricted universe<br /> deb-src http://ftp.sjtu.edu.cn/ubuntu/ precise-backports main multiverse restricted universe<br /> deb-src http://ftp.sjtu.edu.cn/ubuntu/ precise-proposed main multiverse restricted universe<br /> deb-src http://ftp.sjtu.edu.cn/ubuntu/ precise-security main multiverse restricted universe<br /> deb-src http://ftp.sjtu.edu.cn/ubuntu/ precise-updates main multiverse restricted universe</p>
<br />
<p style="margin-top: 0px; margin-bottom: 14px; padding-top: 0px; padding-bottom: 0px; color: #333333; font-family: arial,宋体,sans-serif; font-size: 14px; line-height: 21px;">本文链接地址:&nbsp;<a style="color: #5a8238;" title="ubuntu12.04 更新源地址列表" href="http://www.maybe520.net/blog/a/424.html">http://www.maybe520.net/blog/a/424.html</a></p>
</div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[SublimeText2超强的文本编辑器]]></title>
    <link href="http://apiaceae.github.io/blog/2012/07/15/sublimetext2%E8%B6%85%E5%BC%BA%E7%9A%84%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8/"/>
    <updated>2012-07-15T00:00:00+08:00</updated>
    <id>http://apiaceae.github.io/blog/2012/07/15/sublimetext2超强的文本编辑器</id>
    <content type="html"><![CDATA[<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="http://apiaceae.github.io/images/2012/7/eol_gbif_maps.module+%e2%80%94+ofc.jpg" alt="" /></p>
<p>一些介绍和技巧文章：</p>
<p>http://www.qianduan.net/essential-to-sublime-the-text-2-plugins.html</p>
<p>http://lucifr.com/139225/sublime-text-2-tricks-and-tips/</p>
<p>http://www.iplaysoft.com/sublimetext.html</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ubuntu中文输入法Fcitx安装 ]]></title>
    <link href="http://apiaceae.github.io/blog/2012/04/20/ubuntu%E4%B8%AD%E6%96%87%E8%BE%93%E5%85%A5%E6%B3%95fcitx%E5%AE%89%E8%A3%85/"/>
    <updated>2012-04-20T00:00:00+08:00</updated>
    <id>http://apiaceae.github.io/blog/2012/04/20/ubuntu中文输入法fcitx安装</id>
    <content type="html"><![CDATA[<p>在ubuntu10.10系统安装成功后,系统默认的中文输入法是ibus,但是这个输入法给我们这些在windows下使用sougou用惯了的 人是很不习惯的.特别是打词组的时侯,不能联想,词库不是很多.后来有了解到还有一款中文输入法Fcitx,所以换成这个之后,发现比较适合我使用,虽然 存在很多不足.</p>
<p>&nbsp;</p>
<p>首先来认识下Fcitx,它是Free Chinese Input Toy for&nbsp;X的简称,中文名叫小企鹅输入法,包括拼音和双拼输入法.目前最新版本为4.0.1,相比之前的版本,新增很多功能包括新的皮肤、词库和详细设置界面。<br /> <a href="http://www.mylouge.com/wp-content/uploads/2011/02/Fcitx%E4%B8%AD%E6%96%87%E8%BE%93%E5%85%A5%E6%B3%95.gif"><img class="size-medium wp-image-1147 alignnone" title="Fcitx中文输入法" src="http://www.mylouge.com/wp-content/uploads/2011/02/Fcitx%E4%B8%AD%E6%96%87%E8%BE%93%E5%85%A5%E6%B3%95-300x186.gif" alt="" width="300" height="186" /></a><br /> 之前这款输入法是个人所做(不过已经停止开发)，目前官方主页已经转移到google code上: <a href="http://code.google.com/p/fcitx/">http://code.google.com/p/fcitx/<br /> </a>上面有最新的版本下载和皮肤，词库。<br /> 安装方法如下：<br /> sudo add-apt-repository ppa:wengxt/fcitx-nightly &nbsp; &#92;增加ppa源<br /> sudo apt-get update &nbsp; &#92;更新软件库<br /> sudo apt-get install fcitx fcitx-config-gtk fcitx-sunpinyin &nbsp;&#92;安装fcitx和fcitx-sunpinyin输入法<br /> sudo apt-get install fcitx-table-all &nbsp; &#92;安装码表<br /> 到目前为止输入法已经安装完成了.<br /> 接下来输入:im-switch -s fcitx -z default 把fcitx设置为默认输入法<br /> 或者通过:系统&mdash;系统管理&mdash;语言支持,打开语言和文本设置项,在语言分页中的键盘输入方式系统中选择fcitx.<br /> 另外,可以右击输入法进行配置,包括皮肤,快捷键等.</p>
<p><br /> 除非注明，<a href="http://www.mylouge.com/">空中楼阁</a>的文章均为原创，支持转载，但请以链接形式标明本文地址 <br /> 本文地址：<a href="http://www.mylouge.com/2011/02/1146.html">http://www.mylouge.com/2011/02/1146.html</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[植物分类学-比较数据的系统评估第二版]]></title>
    <link href="http://apiaceae.github.io/blog/2012/03/23/%E6%A4%8D%E7%89%A9%E5%88%86%E7%B1%BB%E5%AD%A6-%E6%AF%94%E8%BE%83%E6%95%B0%E6%8D%AE%E7%9A%84%E7%B3%BB%E7%BB%9F%E8%AF%84%E4%BC%B0%E7%AC%AC%E4%BA%8C%E7%89%88/"/>
    <updated>2012-03-23T00:00:00+08:00</updated>
    <id>http://apiaceae.github.io/blog/2012/03/23/植物分类学-比较数据的系统评估第二版</id>
    <content type="html"><![CDATA[<p><a href="http://blog.cnpc.ac.cn/images/20120323173901.jpg"><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="20120323173901" border="0" alt="20120323173901" src="http://blog.cnpc.ac.cn/images/20120323173901_thumb.jpg" width="377" height="772" /></a></p>  <p>&#160;</p>  <p>&#160;</p>  <p>&#160;</p>  <p>&#160;</p>  <p>&#160;</p>  <p>&#160;</p>  <p>&#160;</p>  <p>&#160;</p>  <p>&#160;</p>  <p>&#160;</p>  <p>&#160;</p>  <p>&#160;</p>  <p>&#160;</p>  <p>&#160;</p>  <p>&#160;</p>  <p>&#160;</p>  <p>&#160;</p>  <p>&#160;</p>  <p>&#160;</p>  <p>&#160;</p>  <p>&#160;</p>  <p><font size="4"><strong>Stuessy教授最近又出版了经典分类学著作的第二版。这里有发表在</strong></font><a href="http://sysbio.oxfordjournals.org/content/59/5/608.full" target="_blank"><font size="4"><strong>系统生物学杂志上的书评</strong></font></a><font size="4"><strong>和</strong></font><a href="http://books.google.com.hk/books?id=0bYs8F0Mb9gC&amp;pg=PP31&amp;lpg=PP31&amp;dq=taxonomy+unending+synthesis&amp;source=bl&amp;ots=5PDmIIznED&amp;sig=NDPharGBVmMxVPDDUxnnYxClRrc&amp;hl=zh-CN&amp;sa=X&amp;ei=UxlsT9uuMouQiQe85sjiBQ&amp;ved=0CCwQ6AEwAA#v=onepage&amp;q=taxonomy%20unending%20synthesis&amp;f=false"><font size="4"><strong>Google图书的地址</strong></font></a><font size="4"><strong>。感兴趣的可以看看。顺便再看看下面的这些报道：</strong></font></p>  <p><a href="http://news.sciencenet.cn/htmlnews/2009/5/218947.html" target="_blank"><font size="4"><strong>动物分类学》：首师大硕士生以“首师大”命名新物种</strong></font></a></p>  <p><a href="http://news.sciencenet.cn/htmlnews/2010/8/235565-1.shtm" target="_blank"><font size="4"><strong>中国分类学急剧萎缩 后继乏人成专家心病</strong></font></a></p>  <p><a href="http://news.sciencenet.cn/htmlnews/2009/12/225728.shtm" target="_blank"><font size="4"><strong>分类学研究岌岌可危 中国策划大规模项目拯救濒危学科</strong></font></a></p>  <h3><a href="http://www.sciencemag.org/content/325/5936/31.short" target="_blank"><font size="4">China Searches for an 11th-Hour Lifesaver for a Dying Discipline</font></a></h3>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[MacOS Fink命令]]></title>
    <link href="http://apiaceae.github.io/blog/2012/03/11/macos-fink%E5%91%BD%E4%BB%A4/"/>
    <updated>2012-03-11T00:00:00+08:00</updated>
    <id>http://apiaceae.github.io/blog/2012/03/11/macos-fink命令</id>
    <content type="html"><![CDATA[<p style="font-size: 1.15em; color: #111111; font-family: Tahoma, Arial, Helvetica, sans-serif; line-height: 21px; text-align: justify; background-color: #fcfcfc;">苹果上自带的Unix其实是很少的，像gcc，make，gnuplot，unrar啊这种杀人越货必备武器都默认没有的。gcc这帮工具好说，安装xcode就行了，其他东西以前用Mac的时候都是用MacPort来搞，但是这次的新Mac在安装Unix工具的时候，上网搜了一下，发现Fink这个更好的工具。</p>
<p style="font-size: 1.15em; color: #111111; font-family: Tahoma, Arial, Helvetica, sans-serif; line-height: 21px; text-align: justify; background-color: #fcfcfc;">Fink工程的目的和MacPort一样，通过修改 Unix 软件来port到Mac OS X 上，然后提供某种下载安装机制供大家使用。在Fink里面你可以像Ubuntu中那样用apt这套工具直接安装二进制包，也可以直接使用Fink来通过源代码编译安装。一般直接用Fink比较好，因为里面的东西比较新。</p>
<p style="font-size: 1.15em; color: #111111; font-family: Tahoma, Arial, Helvetica, sans-serif; line-height: 21px; text-align: justify; background-color: #fcfcfc;"><br />Fink 的所有文件几乎都安装在 /sw （或你选择安装的地方）。因此，如果你想删除 Fink，输入下面的命令：</p>
<blockquote style="font-size: 13px; border-left-width: 3px; border-left-style: solid; border-left-color: #336699; padding-left: 5px; color: #111111; font-family: Tahoma, Arial, Helvetica, sans-serif; line-height: 21px; text-align: justify; background-color: #fcfcfc;">
<p style="font-size: 1.15em;">sudo rm -rf /sw</p>
</blockquote>
<p style="font-size: 1.15em; color: #111111; font-family: Tahoma, Arial, Helvetica, sans-serif; line-height: 21px; text-align: justify; background-color: #fcfcfc;">升级fink自身</p>
<blockquote style="font-size: 13px; border-left-width: 3px; border-left-style: solid; border-left-color: #336699; padding-left: 5px; color: #111111; font-family: Tahoma, Arial, Helvetica, sans-serif; line-height: 21px; text-align: justify; background-color: #fcfcfc;">
<p style="font-size: 1.15em;">fink selfupdate<br />fink selfupdate-rsync<br />fink index -f<br />fink selfupdate</p>
</blockquote>
<p style="font-size: 1.15em; color: #111111; font-family: Tahoma, Arial, Helvetica, sans-serif; line-height: 21px; text-align: justify; background-color: #fcfcfc;">安装</p>
<blockquote style="font-size: 13px; border-left-width: 3px; border-left-style: solid; border-left-color: #336699; padding-left: 5px; color: #111111; font-family: Tahoma, Arial, Helvetica, sans-serif; line-height: 21px; text-align: justify; background-color: #fcfcfc;">
<p style="font-size: 1.15em;">fink install xxx</p>
</blockquote>
<p style="font-size: 1.15em; color: #111111; font-family: Tahoma, Arial, Helvetica, sans-serif; line-height: 21px; text-align: justify; background-color: #fcfcfc;">卸载</p>
<blockquote style="font-size: 13px; border-left-width: 3px; border-left-style: solid; border-left-color: #336699; padding-left: 5px; color: #111111; font-family: Tahoma, Arial, Helvetica, sans-serif; line-height: 21px; text-align: justify; background-color: #fcfcfc;">
<p style="font-size: 1.15em;">fink remove xxx</p>
</blockquote>
<p style="font-size: 1.15em; color: #111111; font-family: Tahoma, Arial, Helvetica, sans-serif; line-height: 21px; text-align: justify; background-color: #fcfcfc;">如果想把依赖包也一起卸载，加-r。如果想配置文件一并卸载，用</p>
<blockquote style="font-size: 13px; border-left-width: 3px; border-left-style: solid; border-left-color: #336699; padding-left: 5px; color: #111111; font-family: Tahoma, Arial, Helvetica, sans-serif; line-height: 21px; text-align: justify; background-color: #fcfcfc;">
<p style="font-size: 1.15em;">fink purge</p>
</blockquote>
<p style="font-size: 1.15em; color: #111111; font-family: Tahoma, Arial, Helvetica, sans-serif; line-height: 21px; text-align: justify; background-color: #fcfcfc;">类似与ubuntu里面的remove &ndash;purge</p>
<p style="font-size: 1.15em; color: #111111; font-family: Tahoma, Arial, Helvetica, sans-serif; line-height: 21px; text-align: justify; background-color: #fcfcfc;">更新所有已安装包</p>
<blockquote style="font-size: 13px; border-left-width: 3px; border-left-style: solid; border-left-color: #336699; padding-left: 5px; color: #111111; font-family: Tahoma, Arial, Helvetica, sans-serif; line-height: 21px; text-align: justify; background-color: #fcfcfc;">
<p style="font-size: 1.15em;">fink update-all</p>
</blockquote>
<p style="font-size: 1.15em; color: #111111; font-family: Tahoma, Arial, Helvetica, sans-serif; line-height: 21px; text-align: justify; background-color: #fcfcfc;">查看可安装包</p>
<blockquote style="font-size: 13px; border-left-width: 3px; border-left-style: solid; border-left-color: #336699; padding-left: 5px; color: #111111; font-family: Tahoma, Arial, Helvetica, sans-serif; line-height: 21px; text-align: justify; background-color: #fcfcfc;">
<p style="font-size: 1.15em;">fink list xxx 或者 fink apropos xxx</p>
</blockquote>
<p style="font-size: 1.15em; color: #111111; font-family: Tahoma, Arial, Helvetica, sans-serif; line-height: 21px; text-align: justify; background-color: #fcfcfc;">也支持正泽表达式</p>
<blockquote style="font-size: 13px; border-left-width: 3px; border-left-style: solid; border-left-color: #336699; padding-left: 5px; color: #111111; font-family: Tahoma, Arial, Helvetica, sans-serif; line-height: 21px; text-align: justify; background-color: #fcfcfc;">
<p style="font-size: 1.15em;">fink list &ldquo;xxx*&rdquo;</p>
</blockquote>
<p style="font-size: 1.15em; color: #111111; font-family: Tahoma, Arial, Helvetica, sans-serif; line-height: 21px; text-align: justify; background-color: #fcfcfc;">查看相关包的描述</p>
<blockquote style="font-size: 13px; border-left-width: 3px; border-left-style: solid; border-left-color: #336699; padding-left: 5px; color: #111111; font-family: Tahoma, Arial, Helvetica, sans-serif; line-height: 21px; text-align: justify; background-color: #fcfcfc;">
<p style="font-size: 1.15em;">fink info</p>
</blockquote>
<p style="font-size: 1.15em; color: #111111; font-family: Tahoma, Arial, Helvetica, sans-serif; line-height: 21px; text-align: justify; background-color: #fcfcfc;">如果不小心删除了某个包的文件，想重新安装整个包</p>
<blockquote style="font-size: 13px; border-left-width: 3px; border-left-style: solid; border-left-color: #336699; padding-left: 5px; color: #111111; font-family: Tahoma, Arial, Helvetica, sans-serif; line-height: 21px; text-align: justify; background-color: #fcfcfc;">
<p style="font-size: 1.15em;">fink reinstall</p>
</blockquote>
<p style="font-size: 1.15em; color: #111111; font-family: Tahoma, Arial, Helvetica, sans-serif; line-height: 21px; text-align: justify; background-color: #fcfcfc;">显示某个包的依赖关系</p>
<blockquote>
<p style="font-size: 1.15em; color: #111111; font-family: Tahoma, Arial, Helvetica, sans-serif; line-height: 21px; text-align: justify; background-color: #fcfcfc;"><span style="font-size: 15px;">fink show-deps xxx</span></p>
<p style="font-size: 1.15em; color: #111111; font-family: Tahoma, Arial, Helvetica, sans-serif; line-height: 21px; text-align: justify; background-color: #fcfcfc;">&nbsp;</p>
</blockquote>
<p style="font-size: 1.15em; color: #111111; font-family: Tahoma, Arial, Helvetica, sans-serif; line-height: 21px; text-align: justify; background-color: #fcfcfc;">原文地址：http://www.kunli.info/2009/12/11/mac-install-pink/</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[分类学杂七杂八]]></title>
    <link href="http://apiaceae.github.io/blog/2012/03/09/%E5%88%86%E7%B1%BB%E5%AD%A6%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB/"/>
    <updated>2012-03-09T00:00:00+08:00</updated>
    <id>http://apiaceae.github.io/blog/2012/03/09/分类学杂七杂八</id>
    <content type="html"><![CDATA[<h2>近代的生物分类系统</h2>
<p>Taxa of Life Tree of Life Life on Earth</p>
<p>The Green Tree of Life Faunaflora</p>
<p>&nbsp;Taxonomy information (Aquatic Organisms)</p>
<p>Systema Naturae 2000 &amp; The Taxonomicon</p>
<p>National Center for Biotechnology Information (NCBI)</p>
<p>&nbsp;Integrated Taxonomic Information System (ITIS)</p>
<p>Compleat Botanica Consensus</p>
<p>Phylogeny of Eukaryotes Lanfranco, 2007.</p>
<p>&nbsp;A phylogenetic classification of organisms other than animals. Shipunov, 2008.</p>
<p>Systema Naturae [Electronic resource, 1995&mdash;onwards].</p>
<p>Baldauf, S. L., 2008. An overview of the phylogeny and diversity of eukaryotes (真核生物系统发育和多样性概况).</p>
<p>Journal of Systematics and Evolution 46(3): 263-273 How do we classify the living world? What is a plant?</p>
<h2>植物分类系统列表</h2>
<p>(List of systems of plant taxonomy)(Wikipedia)</p>
<p>&nbsp;被子植物分類系統相關分析（靜生(傅德志教授)發佈於義妹論壇）</p>
<p>&nbsp;Angiosperm Phylogeny Website Shipunov. Systema Angiospermarum (The classification of flowering plants)[Electronic resource, 1991&mdash;onwards]. v.4.804 (2007) PDF file.</p>
<p>PLANT SYSTEMATICS(植物系统分类学教学网站)</p>
<p>&nbsp;Michael G. Simpson. 2006. Plant Systematics. Slide Presentations,</p>
<p>2007. Concordance of Angiosperm Family Names Flowering Plant Gateway</p>
<p>Cole, T.C.H. and H.H. Hilger. 2008. Angiosperm Phylogeny：Flowering Plant Systematics (Poster).</p>
<h2>系统发育树和系统分类的概念</h2>
<p>&#8220;Phylogenetic Trees: Reclassifying Life, Retelling Time; Topo-, Chrono-, and Patrocladistics&#8221;</p>
<p>&nbsp;Glossary of Phylogenetic Systematics Phylogenetic tree construction Concepts of Phenetic &amp; Patristic distance, and Cladistic relationship Understanding Evolution(認識演化)</p>
<h2>学名和命名法规 生物俗名與學名</h2>
<p>&nbsp;International Code of Botanical Nomenclature (Vienna Code, 2005)</p>
<p>&nbsp;國際植物命名法規(維也納法規) 新版國際植物命名法規(維也納法規) 中的主要變化</p>
<p>Guidelines on Biological Nomenclature PhyloCode PhyloCode: A New System of Nomenclature PhyloCode:</p>
<p>A Phylogenetic Code of Biological Nomenclature Cantino, P. D., H. N. Bryant, K. de Queiroz, M. J. Donoghue, T. Eriksson, D. M. Hillis, and M. S. Y. Lee. 1999.</p>
<p>&nbsp;Species names in phylogenetic nomenclature. Syst. Biol. 48: 790-807.</p>
<p>A Taxonomic Information Model for Botanical Databases. Draft version 7.3 Shin, Jyh-Wei (辛致煒). 2004. Phylogenetic Analysis (online PPT Lecture)</p>
<h2>&nbsp;(親緣分析，線上投影片). 统计学分类和预测</h2>
<p>&nbsp;http://www.cs.zju.edu.cn/people/xucf&#8230;sification.ppt 群集演算法 柔性演算(軟計算) R 導論 高新波。2006。</p>
<p>選擇性模糊聚類分析算法(PPT投影片)。西安電子科技大學電子工程學院。</p>
<p>&nbsp;物种概念 Summary of 26 species concepts 物种形成(Speciation) 植物的物種形成(Plant Speciation) Crisp, M. D. &amp; G.T. 1996 Paraphyletic species. Telopea 6:813-844. 生物學思想發展的歷史 楊曉珮。生物分類的學派。科學月刊 1995年 7月307期 李學勇，2007。達爾文學說在二十世紀中的演變。第七屆科學史研討會彙刊 169-181。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Visual Studio 2010快捷工具配置]]></title>
    <link href="http://apiaceae.github.io/blog/2012/01/24/visual-studio-2010e5bfabe68db7e5b7a5e585b7e9858de7bdae/"/>
    <updated>2012-01-24T00:00:00+08:00</updated>
    <id>http://apiaceae.github.io/blog/2012/01/24/visual-studio-2010e5bfabe68db7e5b7a5e585b7e9858de7bdae</id>
    <content type="html"><![CDATA[<h3>[Visual Studio 2010] Code Rush + PowerCommand + Power Tools 三種套件同時存在的微調修改</h3>  <ul>   <li>2010-08-07</li>    <li>2648</li>    <li>0</li>    <li><a href="http://demo.tc/SeriesArticleList/Visual%20Studio%20%E7%B2%BE%E9%81%B8%E6%93%B4%E5%85%85%E5%A5%97%E4%BB%B6">系列文章</a></li> </ul>  <ul>   <li></li>    <li><a href="http://www.facebook.com/sharer.php?t=[Visual%20Studio%202010]%20Code%20Rush%20+%20PowerCommand%20+%20Power%20Tools%20%E4%B8%89%E7%A8%AE%E5%A5%97%E4%BB%B6%E5%90%8C%E6%99%82%E5%AD%98%E5%9C%A8%E7%9A%84%E5%BE%AE%E8%AA%BF%E4%BF%AE%E6%94%B9-demo%E5%B0%8F%E9%8B%AA&amp;u=http://demo.tc/Post/630">將本文推到Facebook</a></li>    <li><a href="http://twitter.com/?status=http://demo.tc/Post/630%20[Visual%20Studio%202010]%20Code%20Rush%20+%20PowerCommand%20+%20Power%20Tools%20%E4%B8%89%E7%A8%AE%E5%A5%97%E4%BB%B6%E5%90%8C%E6%99%82%E5%AD%98%E5%9C%A8%E7%9A%84%E5%BE%AE%E8%AA%BF%E4%BF%AE%E6%94%B9+-+demo%E5%B0%8F%E9%8B%AA">將本文推到Twitter</a></li>    <li><a href="http://plurk.com/?status=http://demo.tc/Post/630+([Visual%20Studio%202010]%20Code%20Rush%20+%20PowerCommand%20+%20Power%20Tools%20%E4%B8%89%E7%A8%AE%E5%A5%97%E4%BB%B6%E5%90%8C%E6%99%82%E5%AD%98%E5%9C%A8%E7%9A%84%E5%BE%AE%E8%AA%BF%E4%BF%AE%E6%94%B9+-+demo%E5%B0%8F%E9%8B%AA)&amp;qualifier=shares">將本文推到Plurk</a></li>    <li><a href="http://pdfmyurl.com/?url=http://demo.tc/Post/630">下載本文PDF</a></li> </ul>  <p>demo 的 Visual Studio 一直以來都會安裝 Code Rush 和 PowerCommand ，一直也都合作愉快，但最近看了ScottGu&#8217;s 的 Power Tool 介紹文，看到了一個相當棒的功能 Solution Navigator 讓我決定也要安裝 Power Tools ，就因為這樣我的 Visual Studio 擁有了Code Rush + PowerCommand + Power Tools 三套套件，部份功能重複性還滿高的，所以就稍微作了一下調整，記錄下來以免以後忘記。</p>  <p><ins><ins></ins></ins></p>  <ul>   <li>最後更新：2011/7/6 上午 09:12:10</li> </ul>  <p><img title="demo廢言" alt="demo廢言" src="http://demo.tc/images/msn/demosay.gif" />先說明因為 demo 主要功能是 Code Rush &gt; PowerCommand &gt; Power Tools，因此有重複的功能會優先關掉 Power Tool 的，不過考量到 Code Rush 免費版到底有什麼功能我不知道，因此衝突的部份都會寫出來，有需要的朋友再自行調配使用。</p>  <p><img alt="" src="http://lh3.ggpht.com/_PgurvCEASJs/TFz8N-4jlFI/AAAAAAAAGjA/Ocr7cVFvqxo/s800/CPPTools01.gif" />Code Rush （<a href="http://visualstudiogallery.msdn.microsoft.com/zh-TW/F9CDA5D8-10AF-4CC6-9D17-207222A3FD13">官網</a>）預設所有功能都是他，不調整</p>  <hr />  <p><img alt="" src="http://lh5.ggpht.com/_PgurvCEASJs/TFz8NyaBirI/AAAAAAAAGjE/nyQLSYxbzps/s800/CPPTools02.gif" />PowerCommand （<a href="http://visualstudiogallery.msdn.microsoft.com/en-us/e5f41ad9-4edc-4912-bca3-91147db95b99">官網</a>）調整如下：</p>  <p><img alt="" src="http://lh5.ggpht.com/_PgurvCEASJs/TFz8OK_ov6I/AAAAAAAAGjM/swibUMiJ_3w/s800/CPPTools04.gif" /></p>  <ol>   <li>用到機率太小所以關閉。 </li>    <li>內建就有了所以關閉。 </li>    <li>和 Power Tools 重複，所以關閉。</li> </ol>  <p><img alt="" src="http://lh5.ggpht.com/_PgurvCEASJs/TFz8N2d1vOI/AAAAAAAAGjI/tE9LSJdYbIU/s800/CPPTools03.gif" />Power Tools （<a href="http://visualstudiogallery.msdn.microsoft.com/en-us/d0d33361-18e2-46c0-8ff2-4adea1e34fef">官網</a>）調整如下：</p>  <p><img alt="" src="http://lh4.ggpht.com/_PgurvCEASJs/TFz8OLAP1QI/AAAAAAAAGjQ/D629sgQK1Zg/s800/CPPTools05.gif" /></p>  <ol>   <li>因不一定團隊成員都有安裝，所以意義不大，因此關閉。 </li>    <li>與 Code Rush 衝突，因此關閉。 </li>    <li>與 Code Rush 衝突，因此關閉。 </li>    <li>因不一定團隊成員都有安裝，所以意義不大，因此關閉。 </li>    <li>與 Code Rush 衝突，因此關閉。 </li>    <li>單純因為自己用不到所以關閉&#8230;.. </li>    <li>單純因為自己用不到所以關閉&#8230;.. </li>    <li>單純因為自己用不到所以關閉&#8230;.. </li>    <li>CTRL﹢X 更好用所以關閉。</li> </ol>  <hr />  <p>基於以上的調整後，一些重複的功能就不會出現了，但這三個套件功能繁雜，demo 不可能一一介紹（除非我開三篇文）所以就請各位參考一下官方和其他網友的說明吧。</p>  <p><img title="分隔線" alt="分隔線" src="http://demo.tc/images/msn/linkPage.gif" /></p>  <ul>   <li>Code Rush      <ul>       <li><a href="http://visualstudiogallery.msdn.microsoft.com/zh-TW/F9CDA5D8-10AF-4CC6-9D17-207222A3FD13">Visual Studio 模組下載介紹頁面</a></li>        <li><a href="http://www.dotblogs.com.tw/sam319/archive/2009/12/31/12747.aspx">強力推薦寫程式一定要用的外掛工具 - CodeRush Xpress</a></li>        <li><a href="http://www.minitw.com/archives/633">開啟 CodeRush Xpress 10.1 的選單功能列</a></li>     </ul>   </li>    <li>PowerCommand      <ul>       <li><a href="http://visualstudiogallery.msdn.microsoft.com/en-us/e5f41ad9-4edc-4912-bca3-91147db95b99">Visual Studio 模組下載介紹頁面</a></li>        <li><a href="http://weblogs.asp.net/scottgu/archive/2010/05/03/visual-studio-2010-extension-manager-and-the-new-vs-2010-powercommands-extension.aspx">Visual Studio 2010 Extension Manager (and the new VS 2010 PowerCommands Extension)</a></li>     </ul>   </li>    <li>Poert Tools      <ul>       <li><a href="http://visualstudiogallery.msdn.microsoft.com/en-us/d0d33361-18e2-46c0-8ff2-4adea1e34fef">Visual Studio 模組下載介紹頁面</a></li>        <li><a href="http://www.dotblogs.com.tw/larrynung/archive/2010/06/14/15862.aspx">[Visual Studio]Visual Studio 2010 Pro Power Tools</a></li>        <li><a href="http://weblogs.asp.net/scottgu/archive/2010/08/04/some-nice-code-editor-features-provided-by-the-vs-2010-power-tool-extensions.aspx">Some nice code editor features provided by the VS 2010 Power Tool Extensions</a></li>        <li><a href="http://weblogs.asp.net/scottgu/archive/2010/07/19/vs-2010-productivity-power-tools-update-with-some-cool-new-features.aspx">VS 2010 Productivity Power Tools Update (with some cool new features)</a></li>     </ul>   </li> </ul>  <p><a href="http://demo.tc/Tag/Visual%20Studio%20%E6%93%B4%E5%85%85%E5%A5%97%E4%BB%B6">Visual Studio 擴充套件</a></p>  <p>原文地址：<a href="http://demo.tc/Post/630">http://demo.tc/Post/630</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Ubuntu使用Sed命令批量替换文件夹中文件内的字符串]]></title>
    <link href="http://apiaceae.github.io/blog/2011/12/04/ubuntue4bdbfe794a8sede591bde4bba4e689b9e9878fe69bbfe68da2e69687e4bbb6e5a4b9e4b8ade69687e4bbb6e58685e79a84e5ad97e7aca6e4b8b2/"/>
    <updated>2011-12-04T00:00:00+08:00</updated>
    <id>http://apiaceae.github.io/blog/2011/12/04/ubuntue4bdbfe794a8sede591bde4bba4e689b9e9878fe69bbfe68da2e69687e4bbb6e5a4b9e4b8ade69687e4bbb6e58685e79a84e5ad97e7aca6e4b8b2</id>
    <content type="html"><![CDATA[<h5>linux sed 批量替换多个文件中的字符串 </h5>  <p>&#160;</p> sed -i &quot;s/oldstring/newstring/g&quot; `grep oldstring -rl yourdir` 例如：替换/resources下所有文件中的<a href="http://www.admin99.net">www.admin99.net</a>为admin99.net sed -i &quot;s/www.admin99.net/admin99.net/g&quot; `grep www.admin99.net -rl /home` 这个` 符号是F1下边，tab键上边，数字1左边的那个，不是单引号 &#8217;  
]]></content>
  </entry>
  
</feed>
