
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>使用PRY代替RAILS CONSOLE - 虎克的博客</title>
  <meta name="author" content="Hooker">

  
  <meta name="description" content="rails默认的调度工具是ruby-debug19，启动时还要加上&rdquo;&ndash;debug&rdquo;参数，或许你觉得用起来也还可以。但如果你用过pry，你会发现原来可以还这么方便，ruby-debug19是那么的简陋。以前还整过一堆插件来增强irb的功能，现在有了pry， &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://Apiaceae.github.io/blog/2013/02/23/%E4%BD%BF%E7%94%A8pry%E4%BB%A3%E6%9B%BFrails-console">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="虎克的博客" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">虎克的博客</a></h1>
  
    <h2>Enthusiasm Biogeography-Biodiversity Informatics-Data Sciences</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:Apiaceae.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/tag-cloud/">Tags</a></li>
  <li><a href="/about/">About me</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">rails默认的调度工具是ruby-debug19，启动时还要加上&rdquo;&ndash;debug&rdquo;参数，或许你觉得用起来也还可以。但如果你用过pry，你会发现原来可以还这么方便，ruby-debug19是那么的简陋。<br style="margin: 0px; padding: 0px;" />以前还整过一堆插件来增强irb的功能，现在有了pry，默认配置就够用了，还有rails console也可以歇歇了。</p>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">&nbsp;</p>
<h3 style="margin: 0px; padding: 0px; font-size: 14px; color: #008800; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; line-height: 20px; text-align: left; background-color: #ffffff;">安装</h3>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">在Gemfile中添加</p>
<pre class="brush: ruby; title: ; notranslate" style="margin: 5px 0px; padding: 8px 10px; background-color: #f1f5f6; border: 1px dashed #b0bec7; font-family: 'Courier New', Courier, monospace, Fixed; overflow: auto; color: #333333; font-size: 14px; line-height: 20px; text-align: left;" title="">gem 'pry', :group =&amp;gt; :development
</pre>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">然后执行</p>
<pre class="brush: bash; title: ; notranslate" style="margin: 5px 0px; padding: 8px 10px; background-color: #f1f5f6; border: 1px dashed #b0bec7; font-family: 'Courier New', Courier, monospace, Fixed; overflow: auto; color: #333333; font-size: 14px; line-height: 20px; text-align: left;" title="">bundle install
</pre>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">即可。</p>
<h3 style="margin: 0px; padding: 0px; font-size: 14px; color: #008800; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; line-height: 20px; text-align: left; background-color: #ffffff;">它可以这样用</h3>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">用pry代替irb方法，直接运行：</p>
<pre class="brush: bash; title: ; notranslate" style="margin: 5px 0px; padding: 8px 10px; background-color: #f1f5f6; border: 1px dashed #b0bec7; font-family: 'Courier New', Courier, monospace, Fixed; overflow: auto; color: #333333; font-size: 14px; line-height: 20px; text-align: left;" title="">pry
</pre>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">用pry代替rails console方法，运行：</p>
<pre class="brush: bash; title: ; notranslate" style="margin: 5px 0px; padding: 8px 10px; background-color: #f1f5f6; border: 1px dashed #b0bec7; font-family: 'Courier New', Courier, monospace, Fixed; overflow: auto; color: #333333; font-size: 14px; line-height: 20px; text-align: left;" title="">pry -r ./config/environment.rb
</pre>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">调试rails方法：<br style="margin: 0px; padding: 0px;" />直接在要调试的地方添加&rdquo;binding.pry&rdquo;，&rdquo;rails server&rdquo;当运行到这行代码时会自动调出一个pry终端，可以在这里进行交互。退出调试用&rdquo;exit-all&rdquo;。如：</p>
<pre class="brush: ruby; title: ; notranslate" style="margin: 5px 0px; padding: 8px 10px; background-color: #f1f5f6; border: 1px dashed #b0bec7; font-family: 'Courier New', Courier, monospace, Fixed; overflow: auto; color: #333333; font-size: 14px; line-height: 20px; text-align: left;" title="">#/app/controllers/articles_controller.rb
def index
  @articles = Article.all
  binding.pry
end
</pre>
<h3 style="margin: 0px; padding: 0px; font-size: 14px; color: #008800; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; line-height: 20px; text-align: left; background-color: #ffffff;">常用命令</h3>
<ul style="margin: 0px; padding: 0px 0px 10px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">
<li style="margin: 0px; padding: 0px 0px 0px 20px; list-style-position: inside;">cd: 这可不是切换目录的，而是切换类。如&rdquo;cd Article&rdquo;会进入Article类中，&rdquo;Article.all&rdquo;可直接缩写为&rdquo;all&rdquo;</li>
<li style="margin: 0px; padding: 0px 0px 0px 20px; list-style-position: inside;">nesting: cd切来切去如果迷了路，用它可以看当前在哪个类下面。我倒觉得如果名字改为&rdquo;pwd&rdquo;会更好。</li>
<li style="margin: 0px; padding: 0px 0px 0px 20px; list-style-position: inside;">ls: 查看一些信息，ls -h查看帮助，ls -m查看实例方法，ls -M查看类方法，ls -p查看private方法。</li>
<li style="margin: 0px; padding: 0px 0px 0px 20px; list-style-position: inside;">show-doc Array#in_groups_of：查看文档。</li>
<li style="margin: 0px; padding: 0px 0px 0px 20px; list-style-position: inside;">show-method -l Array#in_groups_of：查看方法的源代码，-l显示行号。</li>
<li style="margin: 0px; padding: 0px 0px 0px 20px; list-style-position: inside;">edit-method Array#in_groups_of：调出nano来编辑代码，如果是能调出vim就好啦。(后来发现其实很简单，见后面。)</li>
<li style="margin: 0px; padding: 0px 0px 0px 20px; list-style-position: inside;">help：显示帮助</li>
</ul>
<h3 style="margin: 0px; padding: 0px; font-size: 14px; color: #008800; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; line-height: 20px; text-align: left; background-color: #ffffff;">调试Rails</h3>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">pry默认没有调试中经常用到的下一步，上一步等命令，要安装</p>
<pre class="brush: plain; title: ; notranslate" style="margin: 5px 0px; padding: 8px 10px; background-color: #f1f5f6; border: 1px dashed #b0bec7; font-family: 'Courier New', Courier, monospace, Fixed; overflow: auto; color: #333333; font-size: 14px; line-height: 20px; text-align: left;" title="">gem "pry-nav"
</pre>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">然后就可以使用step, next, continue来跳来跳去了。</p>
<h3 style="margin: 0px; padding: 0px; font-size: 14px; color: #008800; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; line-height: 20px; text-align: left; background-color: #ffffff;">edit和edit-method能自动调用vim</h3>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">默认调出nano编辑源代码是因为系统环境变量中没有$EDITOR的缘故，有两种方法改为vim。<br style="margin: 0px; padding: 0px;" />1、添加环境变量$EDITOR=&rdquo;vim&rdquo;<br style="margin: 0px; padding: 0px;" />2、新建~/.pryrc配置文件，添加</p>
<pre class="brush: plain; title: ; notranslate" style="margin: 5px 0px; padding: 8px 10px; background-color: #f1f5f6; border: 1px dashed #b0bec7; font-family: 'Courier New', Courier, monospace, Fixed; overflow: auto; color: #333333; font-size: 14px; line-height: 20px; text-align: left;" title="">Pry.config.editor = "vim"
</pre>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">更多参考：</p>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">http://railscasts.com/episodes/280-pry-with-rails?view=asciicast</p>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">https://github.com/pry/pry</p>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">http://tyok.org/prying_ruby/</p>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">http://blog.tyraeltong.com/blog/2011/10/14/introducing-pry</p>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">http://gnepud.tumblr.com</p>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">http://rubyer.me/blog/1585/</p>
<p style="margin: 0px 0px 8px; padding: 0px; color: #333333; font-family: Verdana, Tahoma, 'BitStream vera Sans', Arial, Helvetica, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: #ffffff;">下面是Pry&mdash;Hirb-awsom-print三个Gem包配合使用的.pryrc配置文件</p>
<div id="file-gistfile1-rb-LC1" class="line" style="margin: 0px; padding: 0px;"><span class="no" style="margin: 0px; padding: 0px; color: #008080;">Pry</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">config</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">editor</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">=</span> <span class="s2" style="margin: 0px; padding: 0px; color: #dd1144;">&#8220;mvim&#8221;</span></div>
<div id="file-gistfile1-rb-LC2" class="line" style="margin: 0px; padding: 0px;">&nbsp;</div>
<div id="file-gistfile1-rb-LC3" class="line" style="margin: 0px; padding: 0px;"><span class="c1" style="margin: 0px; padding: 0px; color: #999988; font-style: italic;"># Launch Pry with access to the entire Rails stack.</span></div>
<div id="file-gistfile1-rb-LC4" class="line" style="margin: 0px; padding: 0px;"><span class="c1" style="margin: 0px; padding: 0px; color: #999988; font-style: italic;"># If you have Pry in your Gemfile, you can pass: ./script/console &#8211;irb=pry instead.</span></div>
<div id="file-gistfile1-rb-LC5" class="line" style="margin: 0px; padding: 0px;"><span class="c1" style="margin: 0px; padding: 0px; color: #999988; font-style: italic;"># If you don&#8217;t, you can load it through the lines below :)</span></div>
<div id="file-gistfile1-rb-LC6" class="line" style="margin: 0px; padding: 0px;"><span class="n" style="margin: 0px; padding: 0px;">rails</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">=</span> <span class="no" style="margin: 0px; padding: 0px; color: #008080;">File</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">join</span> <span class="no" style="margin: 0px; padding: 0px; color: #008080;">Dir</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">getwd</span><span class="p" style="margin: 0px; padding: 0px;">,</span> <span class="s1" style="margin: 0px; padding: 0px; color: #dd1144;">&#8216;config&#8217;</span><span class="p" style="margin: 0px; padding: 0px;">,</span> <span class="s1" style="margin: 0px; padding: 0px; color: #dd1144;">&#8216;environment.rb&#8217;</span></div>
<div id="file-gistfile1-rb-LC7" class="line" style="margin: 0px; padding: 0px;">&nbsp;</div>
<div id="file-gistfile1-rb-LC8" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">if</span> <span class="no" style="margin: 0px; padding: 0px; color: #008080;">File</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">exist?</span><span class="p" style="margin: 0px; padding: 0px;">(</span><span class="n" style="margin: 0px; padding: 0px;">rails</span><span class="p" style="margin: 0px; padding: 0px;">)</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">&amp;&amp;</span> <span class="no" style="margin: 0px; padding: 0px; color: #008080;">ENV</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">[</span><span class="s1" style="margin: 0px; padding: 0px; color: #dd1144;">&#8216;SKIP_RAILS&#8217;</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">].</span><span class="n" style="margin: 0px; padding: 0px;">nil?</span></div>
<div id="file-gistfile1-rb-LC9" class="line" style="margin: 0px; padding: 0px;"><span class="nb" style="margin: 0px; padding: 0px; color: #0086b3;">require</span> <span class="n" style="margin: 0px; padding: 0px;">rails</span></div>
<div id="file-gistfile1-rb-LC10" class="line" style="margin: 0px; padding: 0px;">&nbsp;</div>
<div id="file-gistfile1-rb-LC11" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">if</span> <span class="no" style="margin: 0px; padding: 0px; color: #008080;">Rails</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">version</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">[</span><span class="mi" style="margin: 0px; padding: 0px; color: #009999;">0</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">.</span><span class="mi" style="margin: 0px; padding: 0px; color: #009999;">0</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">]</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">==</span> <span class="s2" style="margin: 0px; padding: 0px; color: #dd1144;">&#8220;2&#8221;</span></div>
<div id="file-gistfile1-rb-LC12" class="line" style="margin: 0px; padding: 0px;"><span class="nb" style="margin: 0px; padding: 0px; color: #0086b3;">require</span> <span class="s1" style="margin: 0px; padding: 0px; color: #dd1144;">&#8216;console_app&#8217;</span></div>
<div id="file-gistfile1-rb-LC13" class="line" style="margin: 0px; padding: 0px;"><span class="nb" style="margin: 0px; padding: 0px; color: #0086b3;">require</span> <span class="s1" style="margin: 0px; padding: 0px; color: #dd1144;">&#8216;console_with_helpers&#8217;</span></div>
<div id="file-gistfile1-rb-LC14" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">elsif</span> <span class="no" style="margin: 0px; padding: 0px; color: #008080;">Rails</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">version</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">[</span><span class="mi" style="margin: 0px; padding: 0px; color: #009999;">0</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">.</span><span class="mi" style="margin: 0px; padding: 0px; color: #009999;">0</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">]</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">==</span> <span class="s2" style="margin: 0px; padding: 0px; color: #dd1144;">&#8220;3&#8221;</span></div>
<div id="file-gistfile1-rb-LC15" class="line" style="margin: 0px; padding: 0px;"><span class="nb" style="margin: 0px; padding: 0px; color: #0086b3;">require</span> <span class="s1" style="margin: 0px; padding: 0px; color: #dd1144;">&#8216;rails/console/app&#8217;</span></div>
<div id="file-gistfile1-rb-LC16" class="line" style="margin: 0px; padding: 0px;"><span class="nb" style="margin: 0px; padding: 0px; color: #0086b3;">require</span> <span class="s1" style="margin: 0px; padding: 0px; color: #dd1144;">&#8216;rails/console/helpers&#8217;</span></div>
<div id="file-gistfile1-rb-LC17" class="line" style="margin: 0px; padding: 0px;"><span class="c1" style="margin: 0px; padding: 0px; color: #999988; font-style: italic;"># Show sql output</span></div>
<div id="file-gistfile1-rb-LC18" class="line" style="margin: 0px; padding: 0px;"><span class="ss" style="margin: 0px; padding: 0px; color: #990073;">ActiveRecord</span><span class="p" style="margin: 0px; padding: 0px;">:</span><span class="ss" style="margin: 0px; padding: 0px; color: #990073;">:Base</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">logger</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">=</span> <span class="no" style="margin: 0px; padding: 0px; color: #008080;">Logger</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">new</span><span class="p" style="margin: 0px; padding: 0px;">(</span><span class="no" style="margin: 0px; padding: 0px; color: #008080;">STDOUT</span><span class="p" style="margin: 0px; padding: 0px;">)</span> <span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">if</span> <span class="n" style="margin: 0px; padding: 0px;">defined?</span> <span class="ss" style="margin: 0px; padding: 0px; color: #990073;">ActiveRecord</span><span class="p" style="margin: 0px; padding: 0px;">:</span><span class="ss" style="margin: 0px; padding: 0px; color: #990073;">:Base</span></div>
<div id="file-gistfile1-rb-LC19" class="line" style="margin: 0px; padding: 0px;"><span class="c1" style="margin: 0px; padding: 0px; color: #999988; font-style: italic;"># Add reload! command if rails version &gt; 3.2</span></div>
<div id="file-gistfile1-rb-LC20" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">if</span> <span class="no" style="margin: 0px; padding: 0px; color: #008080;">Rails</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">version</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">[</span><span class="mi" style="margin: 0px; padding: 0px; color: #009999;">2</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">.</span><span class="mi" style="margin: 0px; padding: 0px; color: #009999;">2</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">].</span><span class="n" style="margin: 0px; padding: 0px;">to_i</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">&gt;=</span> <span class="mi" style="margin: 0px; padding: 0px; color: #009999;">2</span></div>
<div id="file-gistfile1-rb-LC21" class="line" style="margin: 0px; padding: 0px;"><span class="kp" style="margin: 0px; padding: 0px; font-weight: bold;">include</span> <span class="ss" style="margin: 0px; padding: 0px; color: #990073;">Rails</span><span class="p" style="margin: 0px; padding: 0px;">:</span><span class="ss" style="margin: 0px; padding: 0px; color: #990073;">:ConsoleMethods</span></div>
<div id="file-gistfile1-rb-LC22" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">end</span></div>
<div id="file-gistfile1-rb-LC23" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">else</span></div>
<div id="file-gistfile1-rb-LC24" class="line" style="margin: 0px; padding: 0px;"><span class="nb" style="margin: 0px; padding: 0px; color: #0086b3;">warn</span> <span class="s2" style="margin: 0px; padding: 0px; color: #dd1144;">&#8220;[WARN] cannot load Rails console commands (Not on Rails2 or Rails3?)&#8221;</span></div>
<div id="file-gistfile1-rb-LC25" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">end</span></div>
<div id="file-gistfile1-rb-LC26" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">end</span></div>
<div id="file-gistfile1-rb-LC27" class="line" style="margin: 0px; padding: 0px;">&nbsp;</div>
<div id="file-gistfile1-rb-LC28" class="line" style="margin: 0px; padding: 0px;">&nbsp;</div>
<div id="file-gistfile1-rb-LC29" class="line" style="margin: 0px; padding: 0px;"><span class="c1" style="margin: 0px; padding: 0px; color: #999988; font-style: italic;"># To edit the method given by editor mvim</span></div>
<div id="file-gistfile1-rb-LC30" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">class</span> <span class="nc" style="margin: 0px; padding: 0px; font-weight: bold; color: #445588;">Object</span></div>
<div id="file-gistfile1-rb-LC31" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">def</span> <span class="nf" style="margin: 0px; padding: 0px; font-weight: bold; color: #990000;">mvim</span><span class="p" style="margin: 0px; padding: 0px;">(</span><span class="n" style="margin: 0px; padding: 0px;">method_name</span><span class="p" style="margin: 0px; padding: 0px;">)</span></div>
<div id="file-gistfile1-rb-LC32" class="line" style="margin: 0px; padding: 0px;"><span class="n" style="margin: 0px; padding: 0px;">file</span><span class="p" style="margin: 0px; padding: 0px;">,</span> <span class="n" style="margin: 0px; padding: 0px;">line</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">=</span> <span class="nb" style="margin: 0px; padding: 0px; color: #0086b3;">method</span><span class="p" style="margin: 0px; padding: 0px;">(</span><span class="n" style="margin: 0px; padding: 0px;">method_name</span><span class="p" style="margin: 0px; padding: 0px;">)</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">source_location</span></div>
<div id="file-gistfile1-rb-LC33" class="line" style="margin: 0px; padding: 0px;"><span class="sb" style="margin: 0px; padding: 0px; color: #dd1144;">`mvim &#8217;</span><span class="si" style="margin: 0px; padding: 0px; color: #dd1144;">#{</span><span class="n" style="margin: 0px; padding: 0px;">file</span><span class="si" style="margin: 0px; padding: 0px; color: #dd1144;">}</span><span class="sb" style="margin: 0px; padding: 0px; color: #dd1144;">&#8217; +</span><span class="si" style="margin: 0px; padding: 0px; color: #dd1144;">#{</span><span class="n" style="margin: 0px; padding: 0px;">line</span><span class="si" style="margin: 0px; padding: 0px; color: #dd1144;">}</span><span class="sb" style="margin: 0px; padding: 0px; color: #dd1144;">`</span></div>
<div id="file-gistfile1-rb-LC34" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">end</span></div>
<div id="file-gistfile1-rb-LC35" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">end</span></div>
<div id="file-gistfile1-rb-LC36" class="line" style="margin: 0px; padding: 0px;">&nbsp;</div>
<div id="file-gistfile1-rb-LC37" class="line" style="margin: 0px; padding: 0px;">&nbsp;</div>
<div id="file-gistfile1-rb-LC38" class="line" style="margin: 0px; padding: 0px;"><span class="c1" style="margin: 0px; padding: 0px; color: #999988; font-style: italic;"># Break out of the Bundler jail</span></div>
<div id="file-gistfile1-rb-LC39" class="line" style="margin: 0px; padding: 0px;"><span class="c1" style="margin: 0px; padding: 0px; color: #999988; font-style: italic;"># from https://github.com/ConradIrwin/pry-debundle/blob/master/lib/pry-debundle.rb</span></div>
<div id="file-gistfile1-rb-LC40" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">if</span> <span class="n" style="margin: 0px; padding: 0px;">defined?</span> <span class="no" style="margin: 0px; padding: 0px; color: #008080;">Bundler</span></div>
<div id="file-gistfile1-rb-LC41" class="line" style="margin: 0px; padding: 0px;"><span class="no" style="margin: 0px; padding: 0px; color: #008080;">Gem</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">post_reset_hooks</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">reject!</span> <span class="p" style="margin: 0px; padding: 0px;">{</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">|</span><span class="n" style="margin: 0px; padding: 0px;">hook</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">|</span> <span class="n" style="margin: 0px; padding: 0px;">hook</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">source_location</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">first</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">=~</span> <span class="sr" style="margin: 0px; padding: 0px; color: #009926;">%r{/bundler/}</span> <span class="p" style="margin: 0px; padding: 0px;">}</span></div>
<div id="file-gistfile1-rb-LC42" class="line" style="margin: 0px; padding: 0px;"><span class="ss" style="margin: 0px; padding: 0px; color: #990073;">Gem</span><span class="p" style="margin: 0px; padding: 0px;">:</span><span class="ss" style="margin: 0px; padding: 0px; color: #990073;">:Specification</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">reset</span></div>
<div id="file-gistfile1-rb-LC43" class="line" style="margin: 0px; padding: 0px;"><span class="nb" style="margin: 0px; padding: 0px; color: #0086b3;">load</span> <span class="s1" style="margin: 0px; padding: 0px; color: #dd1144;">&#8216;rubygems/custom_require.rb&#8217;</span></div>
<div id="file-gistfile1-rb-LC44" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">end</span></div>
<div id="file-gistfile1-rb-LC45" class="line" style="margin: 0px; padding: 0px;">&nbsp;</div>
<div id="file-gistfile1-rb-LC46" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">if</span> <span class="n" style="margin: 0px; padding: 0px;">defined?</span> <span class="no" style="margin: 0px; padding: 0px; color: #008080;">Rails</span></div>
<div id="file-gistfile1-rb-LC47" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">begin</span></div>
<div id="file-gistfile1-rb-LC48" class="line" style="margin: 0px; padding: 0px;"><span class="nb" style="margin: 0px; padding: 0px; color: #0086b3;">require</span> <span class="s1" style="margin: 0px; padding: 0px; color: #dd1144;">&#8216;hirb&#8217;</span></div>
<div id="file-gistfile1-rb-LC49" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">rescue</span> <span class="no" style="margin: 0px; padding: 0px; color: #008080;">LoadError</span></div>
<div id="file-gistfile1-rb-LC50" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">end</span></div>
<div id="file-gistfile1-rb-LC51" class="line" style="margin: 0px; padding: 0px;">&nbsp;</div>
<div id="file-gistfile1-rb-LC52" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">if</span> <span class="n" style="margin: 0px; padding: 0px;">defined?</span> <span class="no" style="margin: 0px; padding: 0px; color: #008080;">Hirb</span></div>
<div id="file-gistfile1-rb-LC53" class="line" style="margin: 0px; padding: 0px;"><span class="c1" style="margin: 0px; padding: 0px; color: #999988; font-style: italic;"># Dirty hack to support in-session Hirb.disable/enable</span></div>
<div id="file-gistfile1-rb-LC54" class="line" style="margin: 0px; padding: 0px;"><span class="ss" style="margin: 0px; padding: 0px; color: #990073;">Hirb</span><span class="p" style="margin: 0px; padding: 0px;">:</span><span class="ss" style="margin: 0px; padding: 0px; color: #990073;">:View</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">instance_eval</span> <span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">do</span></div>
<div id="file-gistfile1-rb-LC55" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">def</span> <span class="nf" style="margin: 0px; padding: 0px; font-weight: bold; color: #990000;">enable_output_method</span></div>
<div id="file-gistfile1-rb-LC56" class="line" style="margin: 0px; padding: 0px;"><span class="vi" style="margin: 0px; padding: 0px; color: #008080;">@output_method</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">=</span> <span class="kp" style="margin: 0px; padding: 0px; font-weight: bold;">true</span></div>
<div id="file-gistfile1-rb-LC57" class="line" style="margin: 0px; padding: 0px;"><span class="no" style="margin: 0px; padding: 0px; color: #008080;">Pry</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">config</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">print</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">=</span> <span class="nb" style="margin: 0px; padding: 0px; color: #0086b3;">proc</span> <span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">do</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">|</span><span class="n" style="margin: 0px; padding: 0px;">output</span><span class="p" style="margin: 0px; padding: 0px;">,</span> <span class="n" style="margin: 0px; padding: 0px;">value</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">|</span></div>
<div id="file-gistfile1-rb-LC58" class="line" style="margin: 0px; padding: 0px;"><span class="ss" style="margin: 0px; padding: 0px; color: #990073;">Hirb</span><span class="p" style="margin: 0px; padding: 0px;">:</span><span class="ss" style="margin: 0px; padding: 0px; color: #990073;">:View</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">view_or_page_output</span><span class="p" style="margin: 0px; padding: 0px;">(</span><span class="n" style="margin: 0px; padding: 0px;">value</span><span class="p" style="margin: 0px; padding: 0px;">)</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">||</span> <span class="ss" style="margin: 0px; padding: 0px; color: #990073;">Pry</span><span class="p" style="margin: 0px; padding: 0px;">:</span><span class="ss" style="margin: 0px; padding: 0px; color: #990073;">:DEFAULT_PRINT</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">call</span><span class="p" style="margin: 0px; padding: 0px;">(</span><span class="n" style="margin: 0px; padding: 0px;">output</span><span class="p" style="margin: 0px; padding: 0px;">,</span> <span class="n" style="margin: 0px; padding: 0px;">value</span><span class="p" style="margin: 0px; padding: 0px;">)</span></div>
<div id="file-gistfile1-rb-LC59" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">end</span></div>
<div id="file-gistfile1-rb-LC60" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">end</span></div>
<div id="file-gistfile1-rb-LC61" class="line" style="margin: 0px; padding: 0px;">&nbsp;</div>
<div id="file-gistfile1-rb-LC62" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">def</span> <span class="nf" style="margin: 0px; padding: 0px; font-weight: bold; color: #990000;">disable_output_method</span></div>
<div id="file-gistfile1-rb-LC63" class="line" style="margin: 0px; padding: 0px;"><span class="no" style="margin: 0px; padding: 0px; color: #008080;">Pry</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">config</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">print</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">=</span> <span class="nb" style="margin: 0px; padding: 0px; color: #0086b3;">proc</span> <span class="p" style="margin: 0px; padding: 0px;">{</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">|</span><span class="n" style="margin: 0px; padding: 0px;">output</span><span class="p" style="margin: 0px; padding: 0px;">,</span> <span class="n" style="margin: 0px; padding: 0px;">value</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">|</span> <span class="ss" style="margin: 0px; padding: 0px; color: #990073;">Pry</span><span class="p" style="margin: 0px; padding: 0px;">:</span><span class="ss" style="margin: 0px; padding: 0px; color: #990073;">:DEFAULT_PRINT</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">call</span><span class="p" style="margin: 0px; padding: 0px;">(</span><span class="n" style="margin: 0px; padding: 0px;">output</span><span class="p" style="margin: 0px; padding: 0px;">,</span> <span class="n" style="margin: 0px; padding: 0px;">value</span><span class="p" style="margin: 0px; padding: 0px;">)</span> <span class="p" style="margin: 0px; padding: 0px;">}</span></div>
<div id="file-gistfile1-rb-LC64" class="line" style="margin: 0px; padding: 0px;"><span class="vi" style="margin: 0px; padding: 0px; color: #008080;">@output_method</span> <span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">=</span> <span class="kp" style="margin: 0px; padding: 0px; font-weight: bold;">nil</span></div>
<div id="file-gistfile1-rb-LC65" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">end</span></div>
<div id="file-gistfile1-rb-LC66" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">end</span></div>
<div id="file-gistfile1-rb-LC67" class="line" style="margin: 0px; padding: 0px;">&nbsp;</div>
<div id="file-gistfile1-rb-LC68" class="line" style="margin: 0px; padding: 0px;"><span class="no" style="margin: 0px; padding: 0px; color: #008080;">Hirb</span><span class="o" style="margin: 0px; padding: 0px; font-weight: bold;">.</span><span class="n" style="margin: 0px; padding: 0px;">enable</span></div>
<div id="file-gistfile1-rb-LC69" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">end</span></div>
<div id="file-gistfile1-rb-LC70" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">end</span></div>
<div id="file-gistfile1-rb-LC71" class="line" style="margin: 0px; padding: 0px;">&nbsp;</div>
<div id="file-gistfile1-rb-LC72" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">begin</span></div>
<div id="file-gistfile1-rb-LC73" class="line" style="margin: 0px; padding: 0px;"><span class="nb" style="margin: 0px; padding: 0px; color: #0086b3;">require</span> <span class="s1" style="margin: 0px; padding: 0px; color: #dd1144;">&#8216;awesome_print&#8217;</span></div>
<div id="file-gistfile1-rb-LC74" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">rescue</span> <span class="no" style="margin: 0px; padding: 0px; color: #008080;">LoadError</span></div>
<div id="file-gistfile1-rb-LC75" class="line" style="margin: 0px; padding: 0px;"><span class="k" style="margin: 0px; padding: 0px; font-weight: bold;">end</span></div>
<p class='post-footer'>
       original link:
       <a href='http://Apiaceae.github.io/blog/2013/02/23/%E4%BD%BF%E7%94%A8pry%E4%BB%A3%E6%9B%BFrails-console/'>http://Apiaceae.github.io/blog/2013/02/23/%E4%BD%BF%E7%94%A8pry%E4%BB%A3%E6%9B%BFrails-console/</a><br/>
       &nbsp;written by <a href='http://Apiaceae.github.io'>Hooker</a>
       &nbsp;posted at <a href='http://Apiaceae.github.io'>http://Apiaceae.github.io</a>
       </p>
    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Hooker -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
